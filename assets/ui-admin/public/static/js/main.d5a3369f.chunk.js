(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(2430)),s=n(a(2431)),i=["cpu.usage","mem.usage"],o=["requests.count","errors.count","warnings.count","eventsIn.count","eventsOut.count"];t.groupEntriesByTime=function(e,t){if(e&&e.length){var a=s.default(t),n=e[0].ts;return r.default.groupBy(e,function(e){return e.ts-n<=a?n:n=e.ts})}},t.mergeEntriesByTime=function(e,t){return r.default.values(r.default.mapValues(e,function(e,a){return l(e,a,t)}))};var l=function(e,t,a){var n={},s={},l=!0,c=!1,u=void 0;try{for(var d,p=function(){var t=d.value;n[t]=n[t]||{};var a=r.default.filter(e,function(e){return e.host===t});i.forEach(function(e){var i=r.default.sumBy(a,e);r.default.set(n[t],e,r.default.round(i/a.length,2)),r.default.set(s,e,r.default.get(s,e,0)+i)}),o.forEach(function(e){var i=r.default.sumBy(a,e);r.default.set(n[t],e,i),r.default.set(s,e,r.default.get(s,e,0)+i)})},m=a[Symbol.iterator]();!(l=(d=m.next()).done);l=!0)p()}catch(h){c=!0,u=h}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}return i.forEach(function(t){return r.default.set(s,t,r.default.round(r.default.get(s,t)/e.length,2))}),{ts:+t,hosts:n,summary:s}};t.calculateOverviewForHost=function(e){var t={};return i.forEach(function(a){return r.default.set(t,a,r.default.get(r.default.maxBy(e,a),a))}),o.forEach(function(a){return r.default.set(t,a,r.default.sumBy(e,a))}),t}},3108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(42),i=a.n(s),o=a(120),l=(a(405),a(407),a(3113)),c=a(3112),u=a(3111),d=a(18),p=a(71),m=a(8),h=a(9),g=a(11),f=a(10),E=a(12),v=a(3),b=a(5),y=a.n(b),w=a(6),O=a(72),k=a(7),C=a(150),S=a.n(C),A=a(349),R=a.n(A),P=a(19),I=a.n(P),x=a(350),N=a.n(x),j=a(351),M=function(e){e.location=Object.assign(e.location,{query:N.a.parse(e.location.search)})},T=a.n(j)()({basename:"/admin"});M(T),T.listen(function(){return M(T)});var D=T,F=a(92),B=a.n(F),U="bp/token",L="/home";function K(){var e=localStorage.getItem(U);return e&&JSON.parse(e)||{token:null,expires:0}}function H(){localStorage.removeItem(U),D.replace(L),window.location.reload()}var V=function(){function e(){var t=this;Object(m.a)(this,e),this.login=function(){var e=Object(w.a)(y.a.mark(function e(a){var n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.email,r=a.password,s=a.newPassword,!t.isAuthenticated()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.doLogin({email:n,password:r,newPassword:s});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(w.a)(y.a.mark(function e(a){var n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.email,r=a.password,!t.isAuthenticated()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.doRegister({email:n,password:r});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){H()}}return Object(h.a)(e,[{key:"doLogin",value:function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n,r,s,i,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,r=t.newPassword,e.next=3,ae.getAnonymous({toastErrors:!1}).post("/auth/login",{email:a,password:n,newPassword:r});case 3:s=e.sent,i=s.data,this.setSession({expiresIn:7200,idToken:i.payload.token}),(o=D.location.query.returnTo)?window.location.replace(o):D.replace(L);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"doRegister",value:function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,ae.getAnonymous({toastErrors:!1}).post("/auth/register",{email:a,password:n});case 3:r=e.sent,s=r.data,this.setSession({expiresIn:7200,idToken:s.payload.token}),D.replace(L);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setSession",value:function(e){var t=e.expiresIn;!function(e,t){var a=JSON.stringify({token:e,expires:t||new Date+B()("4h"),time:new Date});localStorage.setItem(U,a)}(e.idToken,JSON.stringify(1e3*(t||7200)+(new Date).getTime()))}},{key:"parseJwt",value:function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}},{key:"isAuthenticated",value:function(){var e=K(),t=e.token,a=e.expires;return t&&(new Date).getTime()<a}}]),e}(),z=a(65);a(488);z.initializeApp({apiKey:"AIzaSyBorvBTBW8GbNjJSmhqLbJsu-SvzqTx5OY",authDomain:"botpress-licensing.firebaseapp.com",databaseURL:"https://botpress-licensing.firebaseio.com",projectId:"botpress-licensing",storageBucket:"",messagingSenderId:"355555448753"});var q,Y=function(){var e=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.auth().currentUser.getIdToken());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.abrupt("return",z.auth().signInWithEmailAndPassword(a,n));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.abrupt("return",z.auth().createUserWithEmailAndPassword(a,n).then(function(e){return e.user.sendEmailVerification()}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=e.email;return z.auth().sendPasswordResetEmail(t)},Q=function(){var e=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.auth().signOut());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_={timeout:2e3},W=function(e,t){var a=t.toastErrors,n=(t.addInterceptor,R.a.create(Object(k.a)({},_,e)));return n.interceptors.response.use(function(e){return e},function(e){var t=I.a.get(e,"response.data"),a=I.a.get(t,"errorCode");return a?["BP_0005","BP_0041","BP_000"].includes(a)?H():S.a.reject(t):S.a.reject(e)}),a&&n.interceptors.response.use(function(e){return e},function(e){var t=I.a.get(e,"response.data.message");return t?X(t):e.message?X(e.message):X("Something wrong happened. Please try again later."),S.a.reject(e)}),n},X=function(e){o.toast.error(e,{position:o.toast.POSITION.TOP_RIGHT})},$=Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_API_URL?{baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_API_URL,"/api/v1")}:{baseURL:"/api/v1"},ee=Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_LICENSING_SERVER?{baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_LICENSING_SERVER)}:{baseURL:"https://license.botpress.io"},te=Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_STRIPE_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_STRIPE_PATH):"https://botpress.io/stripe",ae={getApiPath:function(){return $.baseURL},getSecured:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.token,a=e.toastErrors,n=void 0===a||a;if(!t){var r=K();t=r&&r.token}return W(Object(k.a)({headers:{Authorization:"Bearer ".concat(t)}},$),{toastErrors:n})},getAnonymous:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toastErrors;return W($,{toastErrors:void 0===e||e})},getLicensing:function(){var e=Object(w.a)(y.a.mark(function e(){var t,a,n,r,s,i=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.toastErrors,n=void 0===a||a,e.next=3,Y();case 3:return r=e.sent,(s=W(Object(k.a)({timeout:1e4,headers:{"X-AUTH-TOKEN":"bearer ".concat(r)}},ee),{toastErrors:n})).interceptors.response.use(function(e){return e},function(e){throw!e.response||401!==e.response.status&&403!==e.response.status||Q(),e}),e.abrupt("return",s);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getStripePath:function(){return te}},ne={license:null,licensing:null,keys:null,products:null,fetchingKeys:!1,fetchingProducts:!1,licensingAccount:null},re=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured({toastErrors:!1}).get("admin/license/status");case 2:a=e.sent,n=a.data,t({type:"license/FETCH_LICENSING_RECEIVED",licensing:n.payload});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},se=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"license/FETCH_PRODUCTS_REQUESTED"}),e.next=3,ae.getLicensing();case 3:return a=e.sent,e.next=6,a.get("/prices");case 6:n=e.sent,r=n.data,t({type:"license/FETCH_PRODUCTS_RECEIVED",products:r.products});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},ie=a(352),oe=a.n(ie),le={users:null,loading:!1,loadingUsers:!1,profile:null,permissions:null},ce=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t,a){var n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a(),!n.user.loadingUsers){e.next=3;break}return e.abrupt("return");case 3:return t({type:"user/FETCH_USERS_REQUESTED"}),e.next=6,ae.getSecured().get("/admin/users");case 6:r=e.sent,s=r.data,t({type:"user/FETCH_USERS_RECEIVED",users:s.payload});case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},ue=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"user/MY_PROFILE_REQUESTED"}),e.next=3,ae.getSecured().get("/auth/me/profile").catch(function(){return H()});case 3:a=e.sent,n=a.data,t({type:"user/MY_PROFILE_RECEIVED",profile:n.payload});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},de=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"user/MY_PERMISSIONS_REQUESTED"}),e.next=3,ae.getSecured().get("/auth/me/permissions");case 3:a=e.sent,n=a.data,t({type:"user/MY_PERMISSIONS_RECEIVED",permissions:n.payload});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},pe=a(118),me=a.n(pe),he=function(e){var t,a=e.email,n=e.size,s=e.className,i=me.a.createHash("md5").update(a).digest("hex");return t="lg"===n?200:"sm"===n?25:64,r.a.createElement("img",Object.assign({src:"https://www.gravatar.com/avatar/".concat(i,"?size=").concat(t),alt:""},{className:s}))},ge=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).gotoServer=function(){a.props.licensing&&a.props.licensing.isPro?a.props.push("/server/monitoring"):a.props.push("/server/license")},a.renderDropdown=function(){var e=a.props.profile,t=e.email,n=e.fullName,s=e.isSuperAdmin;return r.a.createElement(v.H,{nav:!0,inNavbar:!0},r.a.createElement(v.m,{nav:!0,caret:!0},r.a.createElement("span",{className:"user-profile"},r.a.createElement(he,{email:a.props.profile.email,size:"sm",className:"user-avatar"}))),r.a.createElement(v.l,{right:!0},r.a.createElement(v.k,{onClick:function(){return a.props.push("/profile/me")}},"Signed in as\xa0",r.a.createElement("strong",null,n||t)),r.a.createElement(v.k,{divider:!0}),r.a.createElement(v.k,{onClick:function(){return a.props.push("/profile/me")}},"My account"),s&&r.a.createElement(v.k,{onClick:a.gotoServer},"Server"),r.a.createElement(v.k,{onClick:function(){return a.auth.logout()}},"Logout")))},a.auth=new V,a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){!this.props.profile&&this.props.fetchProfile()}},{key:"render",value:function(){return this.props.profile?this.renderDropdown():null}}]),t}(n.Component),fe={fetchProfile:ue,push:p.b},Ee=Object(d.b)(function(e){return{profile:e.user.profile,licensing:e.license.licensing}},fe)(ge),ve=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isMenuOpen:!0},a.toggleMenu=function(){a.setState({isMenuOpen:!a.state.isMenuOpen})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){!this.props.licensing&&this.props.fetchLicensing()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"bp-header"},r.a.createElement(v.A,{expand:"md"},r.a.createElement(v.B,{href:"/admin"},r.a.createElement("img",{src:oe.a,alt:"logo",className:"bp-header__logo"})),r.a.createElement(v.C,{onClick:this.toggleMenu}),r.a.createElement(v.i,{isOpen:this.state.isMenuOpen,navbar:!0},r.a.createElement(v.x,{className:"ml-auto",navbar:!0},r.a.createElement(Ee,null))))),this.renderUnlicensed(),r.a.createElement("div",{className:"bp-main-content"},this.props.children))}},{key:"renderUnlicensed",value:function(){return!this.props.licensing||!this.props.licensing.isPro||"licensed"===this.props.licensing.status?null:r.a.createElement("div",{className:"bp-header__warning"},r.a.createElement(v.z,{href:"/admin/license"},r.a.createElement("svg",{viewBox:"0 0 90 82",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M88.21 65.042L54.084 5.932A10.53 10.53 0 0 0 44.99.682a10.53 10.53 0 0 0-9.094 5.25L1.467 65.568a10.532 10.532 0 0 0 0 10.5 10.53 10.53 0 0 0 9.094 5.25H79.44c5.79 0 10.5-4.71 10.5-10.5a10.458 10.458 0 0 0-1.73-5.776zm-8.771 9.275H10.561a3.51 3.51 0 0 1-3.031-1.75 3.51 3.51 0 0 1 0-3.5L41.96 9.433a3.509 3.509 0 0 1 3.031-1.75 3.51 3.51 0 0 1 3.031 1.75l34.184 59.208c.042.073.087.145.135.215.393.578.6 1.257.6 1.962a3.507 3.507 0 0 1-3.502 3.499zM45 54.93a3.912 3.912 0 0 0 3.912-3.912V30.687a3.912 3.912 0 0 0-7.824 0v20.331A3.912 3.912 0 0 0 45 54.93zm0 2.295c-1.32 0-2.601.53-3.54 1.46-.93.93-1.46 2.22-1.46 3.54 0 1.31.53 2.6 1.46 3.53a5.078 5.078 0 0 0 3.54 1.47c1.31 0 2.6-.54 3.53-1.47a5.002 5.002 0 0 0 1.47-3.53 5.003 5.003 0 0 0-5-5z",fill:"#FFF",fillRule:"nonzero"})),"Botpress is currently not licensed. Please update your license to re-enable all features."))}}]),t}(n.Component),be={fetchLicensing:re},ye=Object(d.b)(function(e){return{profile:e.user.profile,licensing:e.license.licensing}},be)(ve),we=a(29),Oe=a(93),ke=a.n(Oe),Ce=function(e){function t(){var e,a;Object(m.a)(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!0,isFirstTimeUse:!1,email:"",authStrategy:"basic",authEndpoint:null,password:"",passwordExpired:!1,error:null},a.loadAuthConfig=Object(w.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getAnonymous().get("/auth/config");case 2:t=e.sent,n=t.data,a.setState({isLoading:!1,isFirstTimeUse:n.payload.isFirstTimeUse,authStrategy:n.payload.strategy,authEndpoint:n.payload.authEndpoint});case 5:case"end":return e.stop()}},e,this)})),a.login=Object(w.a)(y.a.mark(function e(){var t,n,r,s,i,o=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.email,r=t.password,s=t.showError,i=void 0===s||s,a.setState({error:null}),e.prev=2,e.next=5,a.props.auth.login({email:n||a.state.email,password:r||a.state.password});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),"PasswordExpiredError"===e.t0.type?(a.state.email&&a.state.password||a.setState({email:n,password:r}),a.setState({passwordExpired:!0})):i&&a.setState({error:e.t0.message});case 10:case"end":return e.stop()}},e,this,[[2,7]])})),a.checkErrorMessages=function(){var e=new window.URLSearchParams(window.location.search).get("error");e&&e.length&&a.setState({error:e})},a.handleInputChange=function(e){return a.setState(Object(we.a)({},e.target.name,e.target.value))},a.handleInputKeyPress=function(e){return"Enter"===e.key&&a.login()},a.redirectToExternalAuthProvider=function(){if("saml"===a.state.authStrategy)return window.location="".concat(ae.getApiPath(),"/auth/saml-redirect");window.location=a.state.authEndpoint},a.renderForm=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.g,null,"Botpress Admin Panel"),r.a.createElement(v.f,null,"Login"),a.state.error&&r.a.createElement(v.a,{color:"danger"},a.state.error),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"email"},"E-mail"),r.a.createElement(v.q,{value:a.state.email,onChange:a.handleInputChange,type:"text",name:"email",id:"email",onKeyPress:a.handleInputKeyPress})),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(v.q,{value:a.state.password,onChange:a.handleInputChange,type:"password",name:"password",id:"password",onKeyPress:a.handleInputKeyPress})),r.a.createElement("p",null,r.a.createElement(v.c,{onClick:a.login},"Sign in")))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadAuthConfig(),this.checkErrorMessages()}},{key:"renderExternal",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.g,null,"Botpress Admin Panel"),r.a.createElement(v.f,null,"Login"),this.state.error&&r.a.createElement(v.a,{color:"danger"},this.state.error),r.a.createElement("p",null,r.a.createElement(v.c,{onClick:this.redirectToExternalAuthProvider},"Sign in with SSO")))}},{key:"render",value:function(){return this.props.auth.isAuthenticated()?r.a.createElement(u.a,{to:"/"}):this.state.isFirstTimeUse&&"basic"===this.state.authStrategy?r.a.createElement(u.a,{to:"/register"}):this.state.passwordExpired?r.a.createElement(u.a,{to:{pathname:"/ChangePassword",state:this.state}}):this.state.isLoading?null:r.a.createElement("div",{className:"centered-container"},r.a.createElement("div",{className:"middle"},r.a.createElement("div",{className:"inner"},r.a.createElement("img",{className:"logo",src:ke.a,alt:"loading"}),r.a.createElement(v.d,{body:!0},r.a.createElement(v.e,{className:"login-box"},"saml"===this.state.authStrategy?this.renderExternal():this.renderForm())))))}}]),t}(n.Component),Se=function(e){function t(){var e,a;Object(m.a)(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={email:"",password:"",confirmPassword:""},a.register=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({error:null}),a.state.password===a.state.confirmPassword){e.next=4;break}return a.setState({error:"Passwords don't match"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,a.props.auth.register({email:a.state.email,password:a.state.password});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),a.setState({error:e.t0.message});case 12:case"end":return e.stop()}},e,this,[[4,9]])})),a.handleInputChange=function(e){return a.setState(Object(we.a)({},e.target.name,e.target.value))},a.handleInputKeyPress=function(e){return"Enter"===e.key&&a.register()},a.renderForm=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.g,null,"Botpress Admin Panel"),r.a.createElement(v.f,null,"This is the first time you run Botpress. Please create the master admin account."),a.state.error&&r.a.createElement(v.a,{color:"danger"},a.state.error),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"email"},"E-mail"),r.a.createElement(v.q,{type:"text",name:"email",id:"email",value:a.state.email,onChange:a.handleInputChange,onKeyPress:a.onInputKeyPress})),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(v.q,{type:"password",name:"password",id:"password",value:a.state.password,onChange:a.handleInputChange,onKeyPress:a.handleInputKeyPress})),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm password"),r.a.createElement(v.q,{type:"password",name:"confirmPassword",id:"confirmPassword",value:a.state.confirmPassword,onChange:a.handleInputChange,onKeyPress:a.handleInputKeyPress})),r.a.createElement("p",null,r.a.createElement(v.c,{onClick:a.register},"Create Account")))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.auth.isAuthenticated()?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",{className:"centered-container"},r.a.createElement("div",{className:"middle"},r.a.createElement("div",{className:"inner"},r.a.createElement("img",{className:"logo",src:ke.a,alt:"loading"}),r.a.createElement(v.d,{body:!0},r.a.createElement(v.e,{className:"login-box"},this.renderForm())))))}}]),t}(n.Component),Ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).login=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({error:null}),a.state.newPassword===a.state.confirmPassword){e.next=4;break}return a.setState({error:"Passwords don't match"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,a.props.auth.login({email:a.state.email,password:a.state.password,newPassword:a.state.newPassword});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),a.setState({error:e.t0.message});case 12:case"end":return e.stop()}},e,this,[[4,9]])})),a.onInputChange=function(e){return function(t){a.setState(Object(we.a)({},e,t.target.value))}},a.onInputKeyPress=function(e){"Enter"===e.key&&a.login()},a.getReasonText=function(){return""===a.state.password?"This is the first time you run Botpress. Please pick a password.":"Your password has expired or was temporary. Please set a new password."},a.renderForm=function(){return a.state.email?r.a.createElement(n.Fragment,null,r.a.createElement(v.g,null,"Botpress Admin Panel"),r.a.createElement(v.f,null,a.getReasonText()),a.state.error&&r.a.createElement(v.a,{color:"danger"},a.state.error),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"newPassword"},"Password"),r.a.createElement(v.q,{value:a.state.newPassword,onChange:a.onInputChange("newPassword"),type:"password",name:"newPassword",id:"newPassword",onKeyPress:a.onInputKeyPress})),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm password"),r.a.createElement(v.q,{value:a.state.confirmPassword,onChange:a.onInputChange("confirmPassword"),type:"password",name:"confirmPassword",id:"confirmPassword",onKeyPress:a.onInputKeyPress})),r.a.createElement("p",null,r.a.createElement(v.c,{onClick:a.login},"Change"))):r.a.createElement(u.a,{to:"/"})},a.state=Object(k.a)({},e.location.state,{newPassword:"",confirmPassword:""}),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.auth.isAuthenticated()?r.a.createElement(u.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"centered-container"},r.a.createElement("div",{className:"middle"},r.a.createElement("div",{className:"inner"},r.a.createElement("img",{className:"logo",src:ke.a,alt:"loading"}),r.a.createElement(v.d,{body:!0},r.a.createElement(v.e,{className:"login-box"},this.renderForm())))))}}]),t}(n.Component),Re=a(372),Pe=function(e){var t=e.component,a=e.auth,n=e.children,s=Object(Re.a)(e,["component","auth","children"]);return r.a.createElement(c.a,Object.assign({},s,{render:function(e){return a.isAuthenticated()?r.a.createElement(t,Object.assign({},e,{auth:a}),n):r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ie=a(48),xe=a(353),Ne={pendingChanges:{},loading:!1},je={bots:null,loadingBots:!1,botTemplates:[],botTemplatesFetched:!1,botCategories:[],botCategoriesFetched:!1},Me=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().get("/admin/bots/categories");case 2:a=e.sent,n=a.data,t({type:"bots/RECEIVED_BOT_CATEGORIES",categories:n.payload.categories});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},Te=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"bots/FETCH_BOTS_REQUESTED"}),e.next=3,ae.getSecured().get("/admin/bots");case 3:a=e.sent,n=a.data,t({type:"bots/FETCH_BOTS_RECEIVED",bots:n.payload.bots,workspace:n.payload.workspace});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},De={roles:[],loading:!1},Fe=function(){return function(){var e=Object(w.a)(y.a.mark(function e(t,a){var n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a(),!n.roles.loading){e.next=3;break}return e.abrupt("return");case 3:return t({type:"roles/FETCH_ROLES_REQUESTED"}),e.next=6,ae.getSecured().get("/admin/roles");case 6:r=e.sent,s=r.data,t({type:"roles/FETCH_ROLES_RECEIVED",roles:s.payload.roles});case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},Be=a(30),Ue=a.n(Be),Le={stats:null,lastDate:null,loading:!0,loadingIncidents:!0},Ke=Object(Ie.c)({routing:p.d,versioning:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"versioning/FETCH_PENDING_CHANGES":return Object(k.a)({},e,{loading:!0});case"versioning/RECEIVE_PENDING_CHANGES":return{loading:!1,pendingChanges:t.pendingChanges};default:return e}},license:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"license/LICENSE_KEY_UPDATED":var a=e.keys.findIndex(function(e){return e.stripeSubscriptionId===t.license.stripeSubscriptionId});return Object(k.a)({},e,{keys:Object(O.a)(e.keys.slice(0,a)).concat([t.license],Object(O.a)(e.keys.slice(a+1)))});case"license/LOGOUT_USER_FROM_LICENSE_SERVER":return Object(k.a)({},ne);case"license/FETCH_LICENSE_RECEIVED":return Object(k.a)({},e,{license:t.license});case"license/FETCH_LICENSING_RECEIVED":return Object(k.a)({},e,{licensing:t.licensing});case"license/FETCH_KEYS_REQUESTED":return Object(k.a)({},e,{fetchingKeys:!0});case"license/FETCH_KEYS_RECEIVED":return Object(k.a)({},e,{keys:t.keys,fetchingKeys:!1});case"license/UPDATE_LICENSING_ACCOUNT":return Object(k.a)({},e,{licensingAccount:t.account});case"license/FETCH_PRODUCTS_REQUESTED":return Object(k.a)({},e,{fetchingProducts:!0});case"license/FETCH_PRODUCTS_RECEIVED":return Object(k.a)({},e,{products:t.products,fetchingProducts:!1});default:return e}},bots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"bots/RECEIVED_BOT_CATEGORIES":return Object(k.a)({},e,{botCategories:t.categories||[],botCategoriesFetched:!0});case"bots/RECEIVED_BOT_TEMPLATES":return Object(k.a)({},e,{botTemplates:t.templates||[],botTemplatesFetched:!0});case"bots/FETCH_BOTS_REQUESTED":return Object(k.a)({},e,{loadingBots:!0});case"bots/FETCH_BOTS_RECEIVED":return Object(k.a)({},e,{loadingBots:!1,bots:t.bots,workspace:t.workspace});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user/MY_PROFILE_REQUESTED":case"user/MY_PERMISSIONS_REQUESTED":return Object(k.a)({},e,{loading:!0});case"user/FETCH_USERS_REQUESTED":return Object(k.a)({},e,{loadingUsers:!0});case"user/MY_PROFILE_RECEIVED":return Object(k.a)({},e,{loading:!1,profile:t.profile});case"user/MY_PERMISSIONS_RECEIVED":return Object(k.a)({},e,{loading:!1,permissions:t.permissions});case"user/FETCH_USERS_RECEIVED":return Object(k.a)({},e,{loadingUsers:!1,items:t.users});default:return e}},roles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"roles/FETCH_ROLES_REQUESTED":return Object(k.a)({},e,{loading:!0});case"roles/FETCH_ROLES_RECEIVED":return Object(k.a)({},e,{loading:!1,roles:t.roles});default:return e}},monitoring:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"monitoring/FETCH_STATS_FULL_RECEIVED":return Object(k.a)({},e,{stats:t.stats,lastDate:t.toTime,loading:!1});case"bots/FETCH_STATS_PARTIAL_RECEIVED":return Object(k.a)({},e,{stats:Object(O.a)(e.stats).concat(Object(O.a)(t.stats)),lastDate:t.toTime});case"monitoring/FETCH_STATS_FULL_REQUESTED":return Object(k.a)({},e,{loading:!0});case"bots/FETCH_INCIDENTS_RECEIVED":return Object(k.a)({},e,{incidents:t.data,loadingIncidents:!1});case"bots/FETCH_INCIDENTS_REQUESTED":return Object(k.a)({},e,{loadingIncidents:!0});default:return e}}}),He=[xe.a,Object(p.c)(D)],Ve=Ie.d.apply(void 0,[Ie.a.apply(void 0,He)].concat([])),ze=Object(Ie.e)(Ke,{},Ve),qe=a(15),Ye=a(70),Ze=a.n(Ye),Je=a(215),Ge=a.n(Je),Qe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={command:"",copied:!1},a.setPullCommand=function(){var e=-1!==navigator.appVersion.indexOf("Win")?"bp.exe":"./bp",t=K().token,n=window.location.origin,r="".concat(e," pull --url ").concat(n," --authToken ").concat(t," --targetDir data");a.setState({command:r})},a.setCopied=function(){a.setState({copied:!0})},a.renderNoPendingChanges=function(){return r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(Ge.a,null),"\xa0You're all set"),r.a.createElement("p",null,"No changes have been made on this server yet."))))},a.renderMainContent=function(){return r.a.createElement("div",null,a.props.loading&&r.a.createElement("div",null,"loading"),!a.props.loading&&I.a.isEmpty(a.props.pendingChanges)&&a.renderNoPendingChanges(),!a.props.loading&&!I.a.isEmpty(a.props.pendingChanges)&&r.a.createElement("div",null,r.a.createElement("p",null,"Some changes has been made since this server was deployed. Run the botpress pull command to sync server data locally"),r.a.createElement("code",null,a.state.command),r.a.createElement(Ze.a,{text:a.state.command,onCopy:a.setCopied},r.a.createElement(v.c,{color:"link",size:"sm",className:"license-infos__icon"},r.a.createElement("svg",{href:"#",id:"TooltipCopy",height:"15",viewBox:"0 0 16 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M3.996 0H16v16h-4.004v4H0V4h3.996V0zM6 2v12h8V2H6zM2 6v12h8v-1.997H3.998V6H2z",fill:"#4A4A4A",fillRule:"evenodd"})))),a.state.copied&&r.a.createElement("span",null,"\xa0copied")))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPendingChanges(),this.setPullCommand()}},{key:"render",value:function(){return this.renderMainContent()}}]),t}(n.Component),_e=Object(d.b)(function(e){return Object(k.a)({},e.versioning)},{fetchPendingChanges:function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"versioning/FETCH_PENDING_CHANGES"}),e.next=3,ae.getSecured().get("/admin/versioning/pending");case 3:a=e.sent,n=a.data,t({type:"versioning/RECEIVE_PENDING_CHANGES",pendingChanges:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(Qe),We=a(3109),Xe=a(354),$e=a.n(Xe),et=function(){return r.a.createElement(v.D,null,r.a.createElement(v.h,{className:"section",xs:12},r.a.createElement("div",{className:"middle"},r.a.createElement("img",{src:$e.a,alt:"loading"}))))},tt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).displayPolicies=function(){var e=a.props.license,t=e.seats,n=e.versions,r=e.startDate,s=e.endDate;a.setState({policies:[]}),a.addPolicy("Admins",t,a.getBreach("studio seats")),a.addPolicy("Nodes","",a.getBreach("nodes")),a.addPolicy("Version",n,a.getBreach("version")),a.addPolicy("Start Date",Ue()(r).format("YYYY-MM-DD"),a.getBreach("date")),a.addPolicy("End Date",Ue()(s).format("YYYY-MM-DD"),a.getBreach("date")),a.addPolicy("Server Fingerprint","",a.getBreach("fingerprint"))},a.addPolicy=function(e,t,n){a.setState(function(a){return{policies:Object(O.a)(a.policies).concat([{name:e,status:t,breachError:n}])}})},a.state={policies:[],breachs:[]},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.displayPolicies()}},{key:"componentDidUpdate",value:function(e){e.license!==this.props.license&&this.displayPolicies()}},{key:"getBreach",value:function(e){if(this.props.breachs){var t=!0,a=!1,n=void 0;try{for(var r,s=this.props.breachs[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=r.value;if(-1!==i.toLowerCase().indexOf(e))return i}}catch(o){a=!0,n=o}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}}},{key:"render",value:function(){return r.a.createElement("table",{className:"table bp-licensing"},r.a.createElement("tbody",null,this.state.policies.map(function(e,t){return r.a.createElement("tr",{key:t,title:e.breachError},r.a.createElement("td",null,e.breachError?r.a.createElement("span",{role:"img","aria-label":"Breached"},"\u274c"):r.a.createElement("span",{className:"bp-licensing__check"},"\u2713")),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.status))})))}}]),t}(r.a.Component),at=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1,licenseKey:void 0,error:void 0},a.toggleModal=function(){a.setState({isModalOpen:!a.state.isModalOpen,licenseKey:void 0,error:void 0})},a.onInputKeyPress=function(e){"Enter"===e.key&&a.changeKey()},a.onInputChange=function(e){a.setState(Object(we.a)({},e.target.name,e.target.value))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"changeKey",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t=this;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().post("admin/license/update",{licenseKey:this.state.licenseKey},{timeout:1e4}).then(function(){t.props.refresh&&t.props.refresh(),t.toggleModal()}).catch(function(e){return t.setState({error:e.message})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderModal",value:function(){var e=this;return r.a.createElement(v.t,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(v.w,{toggle:this.toggleModal},"Enter your license key"),r.a.createElement(v.u,null,this.state.error&&r.a.createElement(v.a,{color:"danger"},this.state.error),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"firstName"},"New License Key"),r.a.createElement(v.q,{name:"licenseKey",type:"textarea",style:{height:180},onChange:this.onInputChange,onKeyPress:this.onInputKeyPress,value:this.state.licenseKey,autoFocus:!0}))),r.a.createElement(v.v,null,r.a.createElement(v.c,{color:"primary",onClick:function(){return e.changeKey()}},"Validate & Change")))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(v.c,{size:"sm",color:"primary",outline:!0,onClick:this.toggleModal},"Enter license key"),this.renderModal())}}]),t}(n.Component),nt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={waitingForReboot:!1},a.refreshKey=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().post("/admin/license/refresh");case 2:return e.next=4,a.props.fetchLicensing();case 4:case"end":return e.stop()}},e,this)})),a.rebootServer=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.getSecured().post("/admin/server/rebootServer");case 3:a.setState({waitingForReboot:!0}),setTimeout(function(){window.location.reload()},1e4),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({error:e.t0});case 10:case"end":return e.stop()}},e,this,[[0,7]])})),a.enableProEdition=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,ae.getSecured().post("/admin/server/config/enablePro");case 5:if(200!==e.sent.status){e.next=9;break}return e.next=9,a.rebootServer();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a.setState({error:e.t0});case 14:case"end":return e.stop()}},e,this,[[2,11]])})),a.renderProDisabled=function(){return r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:10,offset:1}},r.a.createElement("p",null,"To manage your server license, please enable the Professionnal Edition of Botpress. ",r.a.createElement("br",null),"If you don't have any license keys yet, go to your ",r.a.createElement(We.a,{to:"/profile/account"},"Botpress account")),r.a.createElement("p",null,r.a.createElement("h4",null,"How to enable Botpress Professionnal?")),r.a.createElement("p",null,r.a.createElement("u",null,"Method 1"),r.a.createElement("br",null),"You can enable Botpress Pro by manually editing the file ",r.a.createElement("strong",null,"data/global/botpress.config.json")," ","and setting the value ",r.a.createElement("strong",null,"pro.enabled")," to true."),r.a.createElement("p",null,r.a.createElement("u",null,"Method 2"),r.a.createElement("br",null)," Click on the button below. This will enable the required configuration and will automatically reboot the server. Please note: Rebooting the server this way will prevent you from reading the logs on screen (except if you output logs to the file system).",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.c,{onClick:a.enableProEdition},"Enable Pro & Reboot Server")))))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchLicensing()}},{key:"renderReboot",value:function(){return r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:10,offset:1}},r.a.createElement("p",null,"Please wait while the server reboots, this may take a couple of seconds."))))}},{key:"renderLicenseStatus",value:function(){return r.a.createElement("div",{className:"license-status "+(this.isLicensed?"licensed":"unlicensed")},r.a.createElement("div",null,r.a.createElement("span",{className:"license-status__badge"}),r.a.createElement("span",{className:"license-status__status"},this.isLicensed?"Licensed":"Unlicensed"),r.a.createElement("span",{className:"license-status__limits"},this.isUnderLimits?"Under Limits":"Limits breached")),r.a.createElement(v.c,{color:"link",className:"license-status__refresh",onClick:this.refreshKey},r.a.createElement("svg",{className:"icon",viewBox:"0 0 90 80",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M74.59 57.824l10.498-5.863a3 3 0 1 1 2.926 5.238l-17.779 9.93a2.998 2.998 0 0 1-4.16-1.302l-8.934-18.299a3.002 3.002 0 0 1 1.38-4.013 3.005 3.005 0 0 1 4.013 1.38l5.795 11.87A33.02 33.02 0 0 0 72.865 40c0-18.311-14.897-33.207-33.209-33.207-18.31 0-33.206 14.896-33.206 33.207 0 18.312 14.896 33.209 33.206 33.209 1.236 0 2.476-.068 3.685-.202a3 3 0 0 1 .663 5.963 39.448 39.448 0 0 1-4.348.239C18.038 79.208.45 61.619.45 39.999.45 18.38 18.038.792 39.656.792c21.62 0 39.209 17.588 39.209 39.207a39.011 39.011 0 0 1-4.276 17.825z",fillRule:"evenodd"}))))}},{key:"renderFingerprintStatus",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"license-infos license-infos--fingerprint"},r.a.createElement("strong",{className:"license-infos__label"},"Cluster fingerprint:"),r.a.createElement("code",null,this.serverFingerprints.cluster_url),r.a.createElement(Ye.CopyToClipboard,{text:this.serverFingerprints.cluster_url},r.a.createElement(v.c,{color:"link",size:"sm",className:"license-infos__icon"},r.a.createElement("svg",{href:"#",id:"TooltipCopy",height:"15",viewBox:"0 0 16 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M3.996 0H16v16h-4.004v4H0V4h3.996V0zM6 2v12h8V2H6zM2 6v12h8v-1.997H3.998V6H2z",fill:"#4A4A4A",fillRule:"evenodd"})))),r.a.createElement(v.I,{placement:"right",target:"TooltipCopy"},"Copy to clipboard")),this.isWrongFingerprint&&r.a.createElement(v.a,{color:"danger"},"Your license fingerprint doesn't match your machine/cluster fingerprints."))}},{key:"renderBody",value:function(){return this.state.waitingForReboot?this.renderReboot():this.props.licensing&&!this.props.licensing.isPro?this.renderProDisabled():r.a.createElement(n.Fragment,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{sm:"12",lg:"7"},this.renderLicenseStatus(),r.a.createElement("hr",null),r.a.createElement("h5",null,"Edit key"),r.a.createElement("p",null,"To set a license key, make sure you ",r.a.createElement("a",{href:"/admin/profile/account"},"purchase a license key")," and assign it your current fingerprint."),this.renderFingerprintStatus(),r.a.createElement(at,{refresh:this.props.fetchLicensing})),r.a.createElement(v.h,{sm:"12",lg:"5"},r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Friendly name:"),this.license.label||"N/A"),r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Renew date:"),this.renewDate),r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Support:"),this.license.support,r.a.createElement("svg",{className:"license-infos__icon",href:"#",id:"TooltipSupport",width:"15",height:"15",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M9 16h2v-2H9v2zm1-16C4.477 0 0 4.477 0 10A10 10 0 1 0 10 0zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14a4 4 0 0 0-4 4h2a2 2 0 1 1 4 0c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5a4 4 0 0 0-4-4z",fill:"#4A4A4A",fillRule:"nonzero"})),r.a.createElement(v.I,{placement:"right",target:"TooltipSupport"},"This is the support offered by Botpress")),r.a.createElement("div",{className:"license-infos"},r.a.createElement("strong",{className:"license-infos__label"},"Allowed Nodes:"),this.license.limits&&Number(this.license.limits.nodes)+1),r.a.createElement("hr",null),this.props.licensing&&r.a.createElement("div",null,r.a.createElement("h5",null,"Policies"),r.a.createElement(tt,{license:this.license,breachs:this.props.licensing.breachReasons})))))}},{key:"render",value:function(){return this.props.loading?r.a.createElement(et,null):this.renderBody()}},{key:"isUnderLimits",get:function(){return"breached"!==I.a.get(this.props.licensing,"status")}},{key:"isLicensed",get:function(){return"licensed"===I.a.get(this.props.licensing,"status")}},{key:"renewDate",get:function(){return Ue()(I.a.get(this.props.licensing,"license.paidUntil",new Date)).format("lll")}},{key:"serverFingerprints",get:function(){return I.a.get(this.props.licensing,"fingerprints",{})}},{key:"license",get:function(){return this.props.licensing&&this.props.licensing.license||{}}},{key:"isWrongFingerprint",get:function(){return!!(this.serverFingerprints&&this.license&&this.license.fingerprint)&&this.serverFingerprints[this.license.fingerprintType]!==this.license.fingerprint}}]),t}(r.a.Component),rt={fetchLicensing:re},st=Object(d.b)(function(e){return{loading:e.license.loading,licensing:e.license.licensing}},rt)(nt),it=a(4),ot=a.n(it),lt=a(355),ct=function(e){return e.operation&&e.resource&&!Object(lt.checkRule)(e.permissions,e.operation,e.resource)?null:e.children},ut=a(3110),dt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:null},a.updateRoute=function(e){return a.props.history.push(e)},a.matchCurrentPath=function(e){return Object(ut.a)(a.props.location.pathname,{path:e})},a.getCurrentTab=function(){return a.props.tabs.find(function(e){return a.matchCurrentPath(e.route)})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){!this.props.permissions&&this.props.fetchPermissions(),!this.props.licensing&&this.props.fetchLicensing(),this.setState({activeTab:this.props.tabs[0].name})}},{key:"renderHomeTab",value:function(){var e=this;return r.a.createElement(v.y,{className:"bringMeHome",onClick:function(){return e.props.history.push("/admin")}},r.a.createElement(qe.MdKeyboardArrowLeft,null),r.a.createElement(qe.MdHome,null))}},{key:"renderNavItem",value:function(e){var t=this;return!this.props.licensing||e.proOnly&&!this.props.licensing.isPro?null:r.a.createElement(ct,{permissions:this.props.permissions,resource:e.res,operation:e.op,key:e.name},r.a.createElement(v.y,null,r.a.createElement(v.z,{className:this.matchCurrentPath(e.route)&&"active",onClick:function(){return t.updateRoute(e.route)}},e.icon,e.name)))}},{key:"render",value:function(){var e=this,t=this.getCurrentTab(),a=t&&t.useFullWidth;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"bp_container-header"},r.a.createElement(v.j,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{xs:12,md:{size:10,offset:1}},r.a.createElement("h2",{className:"bp-main-content__title"},this.props.title))),r.a.createElement(v.D,null,r.a.createElement(v.h,{xs:12,md:{size:10,offset:1}},r.a.createElement(v.x,{tabs:!0,className:"bp_container-tabs"},this.props.showHome&&this.renderHomeTab(),this.props.tabs.map(function(t){return e.renderNavItem(t)})))))),r.a.createElement("div",{className:ot()({"bp_container-fullwidth":a})},r.a.createElement(v.j,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{xs:12,md:{size:10,offset:1}},r.a.createElement(l.a,null,this.props.tabs.map(function(e){return r.a.createElement(c.a,{path:e.route,exact:!0,component:e.component,key:e.name})})))))))}}]),t}(n.Component),pt={fetchPermissions:de,fetchLicensing:re},mt=Object(d.b)(function(e){return{permissions:e.user.permissions,licensing:e.license.licensing}},pt)(dt),ht=a(94),gt=a(31),ft=a(51),Et=a(149),vt=(a(327),function(e){var t=e.data,a=[{Header:"Host",accessor:"host"},{Header:"Uptime",Cell:function(e){var t=Ue.a.duration(e.value,"seconds").asMinutes();return"".concat(Math.round(t)," mins")},width:120,className:"center",accessor:"uptime"},{Header:"Peak CPU Usage",Cell:function(e){return e.value+"%"},width:120,accessor:"cpu.usage"},{Header:"Peak Mem Usage",Cell:function(e){return e.value+"%"},width:120,accessor:"mem.usage"},{Header:"Requests",width:120,className:"center",accessor:"requests.count"},{Header:"Events In",width:120,className:"center",accessor:"eventsIn.count",align:"right"},{Header:"Events Out",width:120,className:"center",accessor:"eventsOut.count"},{Header:"Warnings",width:120,className:"center",accessor:"warnings.count"},{Header:"Errors",width:120,className:"center",accessor:"errors.count"}];return r.a.createElement(Et.a,{columns:a,data:t,defaultPageSize:5,defaultSorted:[{id:"host"}],className:"-striped -highlight monitoringOverview"})}),bt=function(e){var t=e.payload,a=e.date,n=e.uniqueHosts;return r.a.createElement("div",{className:"graphToolTip"},r.a.createElement("table",{cellSpacing:0,cellPadding:0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:10,style:{textAlign:"center"}},Ue()(a).format("HH:mm:ss"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Host "),t.map(function(e){return r.a.createElement("th",{style:{color:e.stroke||e.fill},key:e.name},e.name)})),n.map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,e),t.map(function(t){return r.a.createElement("td",{style:{color:t.stroke||t.fill},key:t.name},I.a.get(t.payload.hosts[e],t.dataKey.replace("summary.",""))," ",t.unit)}))}))))},yt=a(152),wt=[{value:"1m",label:"1 minute"},{value:"5m",label:"5 minutes"},{value:"10m",label:"10 minutes"},{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"},{value:"2h",label:"2 hours"},{value:"5h",label:"5 hours"}],Ot=[{value:"10s",label:"10 seconds"},{value:"30s",label:"30 seconds"},{value:"1m",label:"1 minutes"},{value:"5m",label:"5 minutes"},{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"}],kt={fontSize:11},Ct=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={intervalId:null,timeFrame:null,resolution:null,rawStats:null,preparedStats:null,timeFrameOptions:wt},a.handleTimeFrameChanged=function(e){return a.setState({timeFrame:e},a.queryData)},a.handleResolutionChanged=function(e){return a.setState({resolution:e},a.queryData)},a.handleAutoRefreshChanged=function(e){var t=e.target.checked,n=void 0;t&&!a.state.intervalId?n=setInterval(function(){return a.props.refreshStats()},1e4):!t&&a.state.intervalId&&clearInterval(a.state.intervalId),a.setState({autoRefresh:t,intervalId:n})},a.renderTooltip=function(e){var t=e.active,n=e.payload,s=e.label;if(t&&n)return r.a.createElement(bt,{payload:n,uniqueHosts:a.state.uniqueHosts,date:s})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({timeFrame:wt[3],resolution:I.a.head(Ot)},this.queryData)}},{key:"componentWillUnmount",value:function(){this.state.intervalId&&clearInterval(this.state.intervalId)}},{key:"componentDidUpdate",value:function(e){e.rawStats!==this.props.rawStats&&this.prepareForDisplay()}},{key:"queryData",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.timeFrame){e.next=2;break}return e.abrupt("return");case 2:try{t=Ue()().subtract(B()(this.state.timeFrame.value)).toDate().getTime(),a=Ue()().toDate().getTime(),this.props.fetchStats(t,a)}catch(n){this.setState({error:n.message})}case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prepareForDisplay",value:function(){if(this.props.rawStats&&this.props.rawStats.length){var e=I.a.sortBy(I.a.uniqBy(I.a.orderBy(this.props.rawStats,["ts"],["desc"]),"host"),"host"),t=I.a.map(e,"host");this.setState({uniqueHosts:t,lastUniqueEntries:e});var a=Object(yt.groupEntriesByTime)(this.props.rawStats,this.state.resolution.value),n=Object(yt.mergeEntriesByTime)(a,t);this.setState({preparedStats:n})}}},{key:"renderOverview",value:function(){var e=this,t=[];return this.state.lastUniqueEntries.forEach(function(a){t.push(Object(k.a)({host:a.host,uptime:a.uptime},Object(yt.calculateOverviewForHost)(I.a.filter(e.props.rawStats,function(e){return e.host===a.host}))))}),r.a.createElement(vt,{data:t})}},{key:"renderCpu",value:function(){return r.a.createElement(gt.g,{height:300},r.a.createElement(gt.f,{data:this.state.preparedStats},r.a.createElement(gt.b,{strokeDasharray:"3 3"}),r.a.createElement(gt.i,{dataKey:"ts",tickFormatter:function(e){return Ue()(e).format("HH:mm")},scale:"time",tick:kt}),r.a.createElement(gt.j,{domain:[0,100],unit:"%",tick:kt,width:50}),r.a.createElement(gt.j,{yAxisId:"r",orientation:"right",width:30}),r.a.createElement(gt.h,{content:this.renderTooltip}),r.a.createElement(gt.d,null),r.a.createElement(gt.e,{name:"Memory Usage",dataKey:"summary.mem.usage",unit:"%",stroke:"#1C4E80",strokeWidth:2,dot:!1,activeDot:{r:5}}),r.a.createElement(gt.e,{name:"CPU Usage",dataKey:"summary.cpu.usage",unit:"%",stroke:"#0091D5",strokeWidth:2,dot:!1,activeDot:{r:5}})))}},{key:"renderMeasures",value:function(){return r.a.createElement(gt.g,{height:300},r.a.createElement(gt.c,{data:this.state.preparedStats},r.a.createElement(gt.b,{strokeDasharray:"3 3"}),r.a.createElement(gt.i,{dataKey:"ts",tickFormatter:function(e){return Ue()(e).format("HH:mm")},tick:kt}),r.a.createElement(gt.j,{yAxisId:"l",domain:[0,"dataMax"],tick:kt,width:50}),r.a.createElement(gt.j,{yAxisId:"r",domain:[0,"dataMax"],tick:kt,width:30,orientation:"right"}),r.a.createElement(gt.h,{content:this.renderTooltip}),r.a.createElement(gt.d,null),r.a.createElement(gt.a,{stackId:"stack",yAxisId:"l",name:"HTTP Requests",dataKey:"summary.requests.count",fill:"#1C4E80"}),r.a.createElement(gt.a,{stackId:"stack",yAxisId:"l",name:"Events In",dataKey:"summary.eventsIn.count",fill:"#7E909A"}),r.a.createElement(gt.a,{stackId:"stack",yAxisId:"l",name:"Events Out",dataKey:"summary.eventsOut.count",fill:"#6AB187"}),r.a.createElement(gt.e,{yAxisId:"r",name:"Warnings",dataKey:"summary.warnings.count",stroke:"#DBAE58",strokeWidth:2,dot:!1}),r.a.createElement(gt.e,{yAxisId:"r",name:"Errors",dataKey:"summary.errors.count",stroke:"#AC3E31",strokeWidth:2,dot:!1})))}},{key:"renderCharts",value:function(){return this.state.preparedStats?r.a.createElement("div",{className:"monitoring"},r.a.createElement(v.D,null,r.a.createElement(v.h,{md:6},r.a.createElement("h5",null,"CPU & Memory Usage (average)"),this.renderCpu()),r.a.createElement(v.h,{md:6},r.a.createElement("h5",null,"Metrics (total)"),this.renderMeasures())),r.a.createElement(v.D,null,r.a.createElement(v.h,{md:12},r.a.createElement("h5",null,"Overview"),this.renderOverview()))):null}},{key:"renderHeader",value:function(){var e={control:function(e){return Object(k.a)({},e,{minHeight:30})},dropdownIndicator:function(e){return Object(k.a)({},e,{padding:4})},clearIndicator:function(e){return Object(k.a)({},e,{padding:4})},valueContainer:function(e){return Object(k.a)({},e,{padding:"0px 6px"})},input:function(e){return Object(k.a)({},e,{margin:0,padding:0})}};return r.a.createElement(v.D,{style:{fontSize:"80%"}},r.a.createElement(v.h,{md:6},r.a.createElement("h3",null,"Botpress Server Monitoring")),r.a.createElement(v.h,{md:1}),r.a.createElement(v.h,{md:2},r.a.createElement("strong",null,"Time Frame"),r.a.createElement(ft.a,{styles:e,options:wt,value:this.state.timeFrame,onChange:this.handleTimeFrameChanged,isSearchable:!1})),r.a.createElement(v.h,{md:2},r.a.createElement("strong",null,"Resolution"),r.a.createElement(ft.a,{styles:e,options:Ot,value:this.state.resolution,onChange:this.handleResolutionChanged,isSearchable:!1})),r.a.createElement(v.h,{md:1},r.a.createElement("strong",null,"Auto-Refresh"),r.a.createElement("br",null),r.a.createElement(v.s,null,r.a.createElement("input",{style:{marginTop:8},name:"autoRefresh",type:"checkbox",value:this.state.autoRefresh,onChange:this.handleAutoRefreshChanged})," ",r.a.createElement("strong",null,"Enabled"))))}},{key:"renderNoStats",value:function(){return r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(ht.IoIosBoxOutline,null),"\xa0 Monitoring is not enabled or there is no statistics."),r.a.createElement("p",null,"Make sure that monitoring is enabled in your Botpress Config."))))}},{key:"render",value:function(){return this.props.loading?r.a.createElement(et,null):this.props.rawStats?r.a.createElement(v.j,null,this.renderHeader(),this.renderCharts()):this.renderNoStats()}}]),t}(n.Component),St={fetchStats:function(e,t){return function(){var a=Object(w.a)(y.a.mark(function a(n){var r,s;return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"monitoring/FETCH_STATS_FULL_REQUESTED"}),a.next=3,ae.getSecured().post("/admin/server/monitoring",{fromTime:e,toTime:t});case 3:r=a.sent,s=r.data,n({type:"monitoring/FETCH_STATS_FULL_RECEIVED",stats:s&&s.map(JSON.parse),toTime:t});case 6:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},refreshStats:function(){return function(){var e=Object(w.a)(y.a.mark(function e(t,a){var n,r,s,i,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),r=n.monitoring,s=Ue()().toDate().getTime(),e.next=4,ae.getSecured().post("/admin/server/monitoring",{fromTime:r.lastDate,toTime:s});case 4:i=e.sent,o=i.data,t({type:"bots/FETCH_STATS_PARTIAL_RECEIVED",stats:o&&o.map(JSON.parse),toTime:s});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}},At=Object(d.b)(function(e){return{rawStats:e.monitoring.stats,lastDate:e.monitoring.lastDate,loading:e.monitoring.loading}},St)(Ct),Rt=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.helpText?r.a.createElement("span",null,r.a.createElement(qe.MdInfoOutline,{id:"help".concat(this.props.activePage),className:"section-title-help"}),r.a.createElement(v.I,{placement:"right",target:"help".concat(this.props.activePage)},this.props.helpText)):null;return r.a.createElement("div",{className:"bp-main-content-main"},r.a.createElement(v.D,null,r.a.createElement(v.h,{xs:12,md:10},r.a.createElement("h2",{className:"bp-main-content__title"},this.props.title,e))),r.a.createElement(v.D,null,r.a.createElement(v.h,{xs:10},this.props.mainContent),r.a.createElement(v.h,{xs:2,md:2},this.props.sideMenu)))}}]),t}(n.Component),Pt=function(e){var t=e.data,a=[{Header:"Rule",accessor:"ruleName"},{Header:"Host",accessor:"hostName"},{Header:"Start Time",Cell:function(e){return Ue()(e.value).format("YYYY-MM-DD HH:mm:ss")},width:140,className:"center",accessor:"startTime"},{Header:"End Time",Cell:function(e){return e.value&&Ue()(e.value).format("YYYY-MM-DD HH:mm:ss")||""},width:140,accessor:"endTime"},{Header:"Trigger Value",width:100,accessor:"triggerValue"}];return r.a.createElement(Et.a,{columns:a,data:t,defaultPageSize:5,defaultSorted:[{id:"host"}],className:"-striped -highlight monitoringOverview"})},It=[{value:"1h",label:"1 hour"},{value:"2h",label:"2 hours"},{value:"5h",label:"5 hours"},{value:"15h",label:"15 hours"},{value:"24h",label:"24 hours"}],xt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={intervalId:null,timeFrame:null,timeFrameOptions:It},a.handleTimeFrameChanged=function(e){return a.setState({timeFrame:e},a.queryData)},a.handleAutoRefreshChanged=function(e){var t=e.target.checked,n=void 0;t&&!a.state.intervalId?n=setInterval(function(){return a.queryData()},1e4):!t&&a.state.intervalId&&clearInterval(a.state.intervalId),a.setState({autoRefresh:t,intervalId:n})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({timeFrame:It[0]},this.queryData)}},{key:"componentWillUnmount",value:function(){this.state.intervalId&&clearInterval(this.state.intervalId)}},{key:"queryData",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.timeFrame){e.next=2;break}return e.abrupt("return");case 2:try{t=Ue()().subtract(B()(this.state.timeFrame.value)).toDate().getTime(),a=Ue()().toDate().getTime(),this.props.fetchIncidents(t,a)}catch(n){this.setState({error:n.message})}case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderTables",value:function(){return this.props.incidents?r.a.createElement("div",null,r.a.createElement("h4",null,"Active Incidents"),r.a.createElement(Pt,{data:this.props.incidents.active}),r.a.createElement("h4",null,"Resolved Incidents"),r.a.createElement(Pt,{data:this.props.incidents.resolved})):null}},{key:"renderNoData",value:function(){return r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(ht.IoIosBoxOutline,null),"\xa0 Alerting is not enabled or there is no statistics."),r.a.createElement("p",null,"Make sure that alerting is enabled in your Botpress Config."))))}},{key:"render",value:function(){return this.props.incidents?this.props.loadingIncidents?r.a.createElement(et,null):r.a.createElement(Rt,{title:null,helpText:null,mainContent:this.renderTables(),sideMenu:this.renderSideMenu()}):this.renderNoData()}},{key:"renderSideMenu",value:function(){var e={control:function(e){return Object(k.a)({},e,{minHeight:30})},dropdownIndicator:function(e){return Object(k.a)({},e,{padding:4})},clearIndicator:function(e){return Object(k.a)({},e,{padding:4})},valueContainer:function(e){return Object(k.a)({},e,{padding:"0px 6px"})},input:function(e){return Object(k.a)({},e,{margin:0,padding:0})}};return r.a.createElement("div",{style:{fontSize:"80%"}},r.a.createElement("strong",null,"Time Frame"),r.a.createElement(ft.a,{styles:e,options:It,value:this.state.timeFrame,onChange:this.handleTimeFrameChanged,isSearchable:!1}),r.a.createElement("strong",null,"Auto-Refresh"),r.a.createElement("br",null),r.a.createElement(v.s,null,r.a.createElement("input",{style:{marginTop:8},name:"autoRefresh",type:"checkbox",value:this.state.autoRefresh,onChange:this.handleAutoRefreshChanged})," ",r.a.createElement("strong",null,"Enabled")))}}]),t}(n.Component),Nt={fetchIncidents:function(e,t){return function(){var a=Object(w.a)(y.a.mark(function a(n){var r,s;return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"bots/FETCH_INCIDENTS_REQUESTED"}),a.next=3,ae.getSecured().post("/admin/server/incidents",{fromTime:e,toTime:t});case 3:r=a.sent,s=r.data,n({type:"bots/FETCH_INCIDENTS_RECEIVED",data:s});case 6:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},jt=Object(d.b)(function(e){return{incidents:e.monitoring.incidents}},Nt)(xt),Mt=function(e){var t=[{name:"Monitoring",route:"/server/monitoring",icon:r.a.createElement(qe.MdMultilineChart,null),useFullWidth:!0,proOnly:!0,component:At},{name:"Alerts & Incidents",route:"/server/alerting",icon:r.a.createElement(qe.MdNotifications,null),useFullWidth:!1,proOnly:!0,component:jt},{name:"Server License",route:"/server/license",icon:r.a.createElement(qe.MdCopyright,null),component:st},{name:"Version control",route:"/server/version",icon:r.a.createElement(qe.MdCompareArrows,null),component:_e}];return r.a.createElement(mt,Object(k.a)({title:"Server",tabs:t},e,{showHome:!0}))},Tt=a(368),Dt=a.n(Tt),Ft={name:"",template:null,category:null,error:null},Bt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state=Object(k.a)({},Ft),a.isFormValid=function(){return a.formEl&&a.formEl.checkValidity()&&a.state.template},a.handleNameChanged=function(e){a.setState({name:e.target.value})},a.handleTemplateChanged=function(e){a.setState({template:e})},a.handleCategoryChanged=function(e){a.setState({category:e})},a.stanitizeName=function(){return a.state.name.toLowerCase().replace(/\s/g,"-").replace(/[$&+,:;=?@#|'<>.^*()%!]/g,"")},a.createBot=function(){var e=Object(w.a)(y.a.mark(function e(t){var n,r,s,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.isFormValid()){e.next=3;break}return e.abrupt("return");case 3:return n=a.stanitizeName(),r=a.state.name,s=I.a.pick(a.state.template,["id","moduleId"]),i=a.state.category?a.state.category.value:null,e.prev=7,e.next=10,ae.getSecured().post("/admin/bots",{id:n,name:r,template:s,category:i});case 10:a.setState(Object(k.a)({},Ft)),a.props.onCreateBotSuccess&&a.props.onCreateBotSuccess(),a.props.toggle(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),a.setState({error:e.t0.message});case 18:case"end":return e.stop()}},e,this,[[7,15]])}));return function(t){return e.apply(this,arguments)}}(),a.renderTemplateGroupSelect=function(){var e=I.a.groupBy(a.props.botTemplates,"moduleName"),t=I.a.toPairs(e).map(function(e){return{label:e[0],options:e[1]}});return r.a.createElement(ft.a,{getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},options:t,value:a.state.template,onChange:a.handleTemplateChanged})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.botCategoriesFetched||this.props.fetchBotCategories(),this.props.templateFetched||this.props.fetchBotTemplates()}},{key:"render",value:function(){var e=this;return r.a.createElement(v.t,{isOpen:this.props.isOpen,toggle:this.props.toggle},r.a.createElement(v.w,{toggle:this.props.toggle},"Create a new bot"),r.a.createElement(v.u,null,r.a.createElement("form",{onSubmit:this.createBot,ref:function(t){e.formEl=t}},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"name"},r.a.createElement("strong",null,"Name")),r.a.createElement(v.q,{required:!0,type:"text",id:"name",value:this.state.name,onChange:this.handleNameChanged}),r.a.createElement(v.o,null,"The bot name should have at least 4 characters.")),this.props.botTemplates.length>0&&r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"template"},r.a.createElement("strong",null,"Bot Template")),this.renderTemplateGroupSelect()),this.props.botCategories.length>0&&r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"category"},r.a.createElement("strong",null,"Bot Category")),r.a.createElement(ft.a,{options:this.props.botCategories.map(function(e){return{label:e,value:e}}),value:this.state.category,onChange:this.handleCategoryChanged})),r.a.createElement(v.c,{className:"float-right",type:"submit",color:"primary",disabled:!this.isFormValid()},r.a.createElement(qe.MdGroupAdd,null)," Create bot")),!!this.state.error&&r.a.createElement("p",{className:"text-danger"},this.state.error)))}}]),t}(n.Component),Ut={fetchBotTemplates:function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().get("/modules/botTemplates");case 2:a=e.sent,n=a.data,t({type:"bots/RECEIVED_BOT_TEMPLATES",templates:n});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchBotCategories:Me},Lt=Object(d.b)(function(e){return Object(k.a)({},e.bots)},Ut)(Bt),Kt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isCreateBotModalOpen:!1,errorCreateBot:void 0,errorEditBot:void 0,id:"",name:"",description:""},a.toggleCreateBotModal=function(){a.setState({isCreateBotModalOpen:!a.state.isCreateBotModalOpen})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"renderLoading",value:function(){return r.a.createElement(et,null)}},{key:"componentDidMount",value:function(){this.props.fetchBots(),this.props.fetchPermissions()}},{key:"deleteBot",value:function(){var e=Object(w.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this bot? This can't be undone.")){e.next=5;break}return e.next=3,ae.getSecured().delete("/admin/bots/".concat(t));case 3:return e.next=5,this.props.fetchBots();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderEmptyBots",value:function(){return r.a.createElement("div",{className:"bots"},r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(ht.IoIosBoxOutline,null),"\xa0 This workspace has no bot, yet."),r.a.createElement("p",null,"In Botpress, bots are always assigned to a workspace."),r.a.createElement("p",null,this.renderCreateNewBotButton(!0))))))}},{key:"renderCreateNewBotButton",value:function(e){var t=this;return r.a.createElement(ct,{permissions:this.props.permissions,resource:"admin.bots.*",operation:"write"},r.a.createElement(v.c,{className:e?"":"float-right",onClick:function(){return t.setState({isCreateBotModalOpen:!0})},color:"primary",size:"sm"},r.a.createElement(qe.MdCreate,null)," Create Bot"))}},{key:"renderBots",value:function(){var e=this;return r.a.createElement("div",{className:"bp_table"},I.a.orderBy(this.props.bots,["id"],["desc"]).map(function(t){return r.a.createElement("div",{className:"bp_table-row",key:t.id},r.a.createElement("div",{className:"actions"},r.a.createElement(ct,{permissions:e.props.permissions,resource:"admin.bots.*",operation:"write"},r.a.createElement(v.c,{size:"sm",color:"link",onClick:function(){return e.props.history.push("/bot/".concat(t.id,"/details"))}},"Config"),"|",r.a.createElement(v.c,{size:"sm",color:"link",onClick:function(){return e.deleteBot(t.id)}},"Delete"))),r.a.createElement("div",{className:"title"},t.disabled?r.a.createElement(n.Fragment,null,r.a.createElement("span",null,t.name),r.a.createElement(v.b,{color:"danger",style:{marginLeft:10,fontSize:"60%"}},"disabled")):r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:"/studio/".concat(t.id)},t.name),t.private&&r.a.createElement(v.b,{color:"primary",style:{marginLeft:10,fontSize:"60%"}},"private"))),r.a.createElement("p",null,t.description))}))}},{key:"render",value:function(){return this.props.bots?(setTimeout(function(){Dt()()},10),r.a.createElement(n.Fragment,null,r.a.createElement(Rt,{title:"Your bots",helpText:"This page lists all the bots created under the default workspace.",activePage:"bots",currentTeam:this.props.team,mainContent:this.props.bots.length>0?this.renderBots():this.renderEmptyBots(),sideMenu:this.renderCreateNewBotButton()}),r.a.createElement(Lt,{isOpen:this.state.isCreateBotModalOpen,toggle:this.toggleCreateBotModal,onCreateBotSuccess:this.props.fetchBots}))):r.a.createElement(et,null)}}]),t}(n.Component),Ht={fetchBots:Te,fetchPermissions:de},Vt=Object(d.b)(function(e){return{bots:e.bots.bots,workspace:e.bots.workspace,loading:e.bots.loadingBots,permissions:e.user.permissions}},Ht)(Kt),zt=a(225),qt=a.n(zt),Yt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={needRefresh:!1},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers(),this.props.fetchRoles()}},{key:"componentDidUpdate",value:function(){this.state.needRefresh&&(this.props.fetchUsers(),this.setState({needRefresh:!1}))}},{key:"toggle",value:function(e){this.setState(Object(we.a)({},e,!this.state[e]))}},{key:"renderActionButton",value:function(e){var t=this;return r.a.createElement(v.G,null,r.a.createElement(v.m,{caret:!0,outline:!0,color:"secondary",size:"sm"},"More"),r.a.createElement(v.l,null,this.props.actions.map(function(a,n){return r.a.createElement(v.k,{color:a.type?a.type:"link",size:"sm",key:n,onClick:function(){a.onClick(e),a.needRefresh&&t.setState({needRefresh:!0})}},a.label)})))}},{key:"renderUsersForRole",value:function(e,t){var a=this;return r.a.createElement(v.i,{isOpen:this.state[t]},r.a.createElement("div",{className:"bp_table"},e.map(function(e){return r.a.createElement("div",{className:"bp_table-row bp_users-list",key:"user-"+e.email},e.email!==a.props.profile.email&&a.renderActionButton(e),r.a.createElement(he,{email:e.email,size:"md",className:"pullLeft"}),r.a.createElement("div",{className:"pullLeft details"},r.a.createElement("div",{className:"nameZone"},e.firstname,"\xa0",e.lastname),r.a.createElement("p",null,r.a.createElement("span",{className:"field"},r.a.createElement("b",null,"Email: "),e.email),r.a.createElement("span",{className:"field"},r.a.createElement("b",null,"Last Login: "),e.last_logon?Ue()(e.last_logon).fromNow():"never"),r.a.createElement("span",{className:"field"},r.a.createElement("b",null,"Joined: "),Ue()(e.created_on).fromNow()))),r.a.createElement("div",{style:{clear:"both"}}))})))}},{key:"renderRole",value:function(e,t){var a=this;return r.a.createElement("div",{key:"role-"+t.id},r.a.createElement("div",{onClick:function(){return a.toggle(t.id)},className:"bp_users-role_header"},r.a.createElement("div",{className:"role float-left"},r.a.createElement(v.b,{pill:!0,color:"light"},e.length),r.a.createElement("span",{className:"title"},t.name)),this.state[t.id]?r.a.createElement(qe.MdKeyboardArrowUp,null):r.a.createElement(qe.MdKeyboardArrowDown,null)),this.renderUsersForRole(e,t.id))}},{key:"renderPage",value:function(){var e=this;return r.a.createElement("div",{className:"bp_users-container"},this.props.roles.map(function(t){var a=e.props.users.filter(function(e){return e.role===t.id});return a.length?e.renderRole(a,t):null}))}},{key:"render",value:function(){return!this.props.users||this.props.loading?r.a.createElement(et,null):this.renderPage()}}]),t}(n.Component),Zt=Object(d.b)(function(e){return{profile:e.user.profile,roles:e.roles.roles,users:e.user.items,loading:e.user.loadingUsers}},function(e){return Object(Ie.b)({fetchUsers:ce,fetchRoles:Fe},e)})(Yt),Jt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",role:null},a.onEmailChanged=function(e){a.setState({email:e.target.value})},a.onRoleChange=function(e){a.setState({role:e.target.value})},a.createUser=function(){var e=Object(w.a)(y.a.mark(function e(t){var n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.isFormValid()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ae.getSecured().post("/admin/users",{email:a.state.email,role:a.state.role});case 5:n=e.sent,r=n.data,a.props.onUserCreated&&a.props.onUserCreated(r.payload);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.isFormValid=function(){return a.formEl&&a.formEl.checkValidity()},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchRoles()}},{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.emailInput.focus(),!e.roles.length&&this.props.roles.length&&this.setState({role:this.props.roles[0].id})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.t,{isOpen:this.props.isOpen,toggle:this.props.toggleOpen},r.a.createElement(v.w,{toggle:this.props.toggleOpen},"Add Collaborator"),r.a.createElement(v.u,null,r.a.createElement("form",{onSubmit:this.createUser,ref:function(t){e.formEl=t}},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"email"},"E-mail"),r.a.createElement(v.q,{id:"email",type:"email",innerRef:function(t){e.emailInput=t},onChange:this.onEmailChanged,required:!0,value:this.state.email})),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"role"},"Role"),r.a.createElement(v.q,{required:!0,type:"select",value:this.state.role,onChange:this.onRoleChange},this.props.roles.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))),r.a.createElement(v.c,{className:"float-right",type:"submit",color:"primary",disabled:!this.isFormValid()},r.a.createElement(qe.MdGroupAdd,null)," Add"))))}}]),t}(n.Component),Gt={fetchRoles:Fe},Qt=Object(d.b)(function(e){return{roles:e.roles.roles}},Gt)(Jt),_t=qt.a.string().email().trim(),Wt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isCreateUserModalOpen:!1,isRenderEmailModalOpen:!1,isUpdateRoleModalOpen:!1,email:"",isRoleChanged:!1,user:null,createUserError:null},a.loadAuthStrategy=Object(w.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getAnonymous().get("/auth/config");case 2:t=e.sent,n=t.data,a.setState({authStrategy:n.payload.strategy});case 5:case"end":return e.stop()}},e,this)})),a.toggleCreateUserModalOpen=function(){a.setState({isCreateUserModalOpen:!a.state.isCreateUserModalOpen,email:"",error:null})},a.toggleRenderEmailModal=function(){a.setState({isRenderEmailModalOpen:!a.state.isRenderEmailModalOpen})},a.toggleUpdateUserModal=function(e){var t=!a.state.isUpdateRoleModalOpen;e?a.setState({isUpdateRoleModalOpen:t,user:e}):a.setState({isUpdateRoleModalOpen:t})},a.onInputKeyPress=function(e){return"Enter"===e.key&&a.createUser()},a.onNewUserEmailChange=function(e){var t=qt.a.validate(e.target.value,_t).error;a.setState({email:e.target.value,canCreateUser:!t,createUserError:t})},a.onUserCreated=function(e){var t="Your botpress account is ready! \n\n      Sign-in here: ".concat(window.location.origin,"/admin/login\n      Email: ").concat(a.state.email,"\n      Password: ").concat(e.tempPassword);a.setState({isCreateUserModalOpen:!1,isRenderEmailModalOpen:!0,emailSubject:"Account creation successful",emailMessage:t}),a.props.fetchUsers()},a.updateUser=Object(w.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.user,e.next=3,ae.getSecured().put("/admin/users/".concat(t.email),t);case 3:a.setState({isRoleChanged:!1,isUpdateRoleModalOpen:!1,user:null},a.props.fetchUsers);case 4:case"end":return e.stop()}},e,this)})),a.onRoleChange=function(e){var t=e.target.value;a.setState({user:Object(k.a)({},a.state.user,{role:t}),isRoleChanged:!0})},a.onCopy=function(){a.setState({copied:!0}),window.setTimeout(function(){a.setState({copied:!1})},750)},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadAuthStrategy(),this.props.fetchRoles()}},{key:"resetPassword",value:function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to reset ".concat(t.email,"'s password?"))){e.next=7;break}return e.next=3,ae.getSecured().get("/admin/users/reset/".concat(t.email));case 3:a=e.sent,n=a.data.payload,r="Your password has been reset.\n     \nEmail: ".concat(t.email,"\nPassword: ").concat(n.tempPassword),this.setState({isRenderEmailModalOpen:!0,emailSubject:"Password reset",emailMessage:r,createUserError:null});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(w.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete ".concat(t.email,"'s account?"))){e.next=3;break}return e.next=3,ae.getSecured().delete("/admin/users/".concat(t.email));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderUpdateUserModal",value:function(){return r.a.createElement(v.t,{isOpen:this.state.isUpdateRoleModalOpen,toggle:this.toggleUpdateUserModal},r.a.createElement(v.w,{toggle:this.toggleUpdateUserModal},"Change Role"),r.a.createElement(v.u,null,r.a.createElement(v.q,{type:"select",defaultValue:this.state.user&&this.state.user.role,onChange:this.onRoleChange},this.props.roles.map(function(e){return r.a.createElement("option",{value:e.id,key:"role-"+e.id},e.name)}))),r.a.createElement(v.v,null,r.a.createElement(v.c,{disabled:!this.state.isRoleChanged,onClick:this.updateUser},"Save")))}},{key:"renderEmailModal",value:function(){return r.a.createElement(v.t,{isOpen:this.state.isRenderEmailModalOpen,toggle:this.toggleRenderEmailModal},r.a.createElement(v.w,{toggle:this.toggleRenderEmailModal},this.state.emailSubject),r.a.createElement(v.u,null,r.a.createElement(v.q,{type:"textarea",readOnly:!0,style:{height:160},value:this.state.emailMessage})),r.a.createElement(v.v,null,r.a.createElement(Ye.CopyToClipboard,{text:this.state.emailMessage,onCopy:this.onCopy},r.a.createElement(v.c,null,this.state.copied?"Copied!":"Copy to clipboard"))))}},{key:"renderAllUsers",value:function(){var e=this,t={label:"Reset Password",type:"link",onClick:function(t){return e.resetPassword(t)}},a={label:"Delete",type:"link",needRefresh:!0,onClick:function(t){return e.deleteUser(t)}},n={label:"Change Role",type:"link",needRefresh:!0,onClick:function(t){return e.toggleUpdateUserModal(t)}},s="basic"===this.state.authStrategy?[t,n,a]:[n,a];return r.a.createElement("div",null,r.a.createElement(Zt,{actions:s,detailed:"true"}))}},{key:"renderSideMenu",value:function(){return r.a.createElement("div",null,r.a.createElement(v.c,{className:"float-right",color:"primary",size:"sm",onClick:this.toggleCreateUserModalOpen},r.a.createElement(qe.MdGroupAdd,null)," Add Collaborator"),r.a.createElement(Qt,{isOpen:this.state.isCreateUserModalOpen,toggleOpen:this.toggleCreateUserModalOpen,onUserCreated:this.onUserCreated}),this.renderEmailModal(),this.renderUpdateUserModal())}},{key:"render",value:function(){return r.a.createElement(Rt,{title:"Collaborators",helpText:"Create, delete users or update their role.",activePage:"users",mainContent:this.renderAllUsers(),sideMenu:this.renderSideMenu()})}}]),t}(n.Component),Xt={fetchUsers:ce,fetchRoles:Fe},$t=Object(d.b)(function(e){return{loading:e.user.loadingUsers,roles:e.roles.roles}},Xt)(Wt),ea=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchRoles()}},{key:"renderRoles",value:function(){return r.a.createElement("div",{className:"bp_table"},this.props.roles.map(function(e){return r.a.createElement("div",{className:"bp_table-row",key:e.id},r.a.createElement("div",{className:"title"},e.name),r.a.createElement("p",null,e.description))}))}},{key:"render",value:function(){return r.a.createElement(Rt,{title:"Roles",helpText:"To change roles, please see \u201croles\u201d in the workspaces.json file.",activePage:"roles",currentTeam:this.props.team,mainContent:this.renderRoles()})}}]),t}(n.Component),ta={fetchRoles:Fe},aa=Object(d.b)(function(e){return{roles:e.roles.roles}},ta)(ea),na=function(e){var t=[{name:"Bots",route:"/workspace/bots",icon:r.a.createElement(qe.MdAndroid,null),component:Vt,res:"admin.bots.*",op:"read"},{name:"Collaborators",route:"/workspace/users",icon:r.a.createElement(qe.MdPeople,null),component:$t,res:"admin.collaborators.*",op:"read",proOnly:!0},{name:"Roles",route:"/workspace/roles",icon:r.a.createElement(qe.MdVerifiedUser,null),component:aa,res:"admin.roles.*",op:"read",proOnly:!0}];return r.a.createElement(mt,Object(k.a)({title:"Workspace",tabs:t},e))},ra=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1,password:"",newPassword:"",confirmPassword:"",error:void 0},a.toggleModal=function(){a.setState({isModalOpen:!a.state.isModalOpen})},a.onInputKeyPress=function(e){"Enter"===e.key&&a.changePassword()},a.onInputChange=function(e){a.setState(Object(we.a)({},e.target.name,e.target.value))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"changePassword",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t=this;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.newPassword===this.state.confirmPassword){e.next=3;break}return this.setState({error:"Passwords don't match"}),e.abrupt("return");case 3:return e.next=5,ae.getSecured().post("/auth/login",{email:this.props.profile.email,password:this.state.password,newPassword:this.state.newPassword}).then(function(){return t.toggleModal()}).catch(function(e){return t.setState({error:e.message})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderModal",value:function(){var e=this;return r.a.createElement(v.t,{isOpen:this.state.isModalOpen,toggle:this.toggleModal},r.a.createElement(v.w,{toggle:this.toggleModal},"Change your password"),r.a.createElement(v.u,null,this.state.error&&r.a.createElement(v.a,{color:"danger"},this.state.error),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"firstName"},"Current Password"),r.a.createElement(v.q,{name:"password",type:"password",onChange:this.onInputChange,onKeyPress:this.onInputKeyPress,value:this.state.firstName})),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"lastName"},"New Password"),r.a.createElement(v.q,{value:this.state.newPassword,type:"password",name:"newPassword",onChange:this.onInputChange,onKeyPress:this.onInputKeyPress})),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"lastName"},"Confirm Password"),r.a.createElement(v.q,{value:this.state.confirmPassword,type:"password",name:"confirmPassword",onChange:this.onInputChange,onKeyPress:this.onInputKeyPress}))),r.a.createElement(v.v,null,r.a.createElement(v.c,{color:"primary",onClick:function(){return e.changePassword()}},"Change")))}},{key:"render",value:function(){return r.a.createElement("div",{className:"profile__change-pwd"},r.a.createElement(v.c,{color:"primary",size:"sm",onClick:this.toggleModal},"Change Password"),this.renderModal())}}]),t}(n.Component),sa=Object(d.b)(function(e){return{profile:e.user.profile}})(ra),ia=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isInit:!1,forceClose:!1,firstName:"",lastName:"",isDirty:!1},a.displayName=function(){var e=a.props.profile,t=e.firstname,n=void 0===t?"":t,r=e.lastname,s=void 0===r?"":r;a.setState({firstName:n,lastName:s})},a.closeModal=function(){a.setState({forceClose:!0})},a.isModalOpen=function(){return!a.state.forceClose&&!I.a.get(a.props,"profile.fullName")},a.onInputKeyPress=function(e){"Enter"===e.key&&a.updateProfile()},a.onInputChanged=function(e){var t;a.setState((t={},Object(we.a)(t,e.target.name,e.target.value),Object(we.a)(t,"isDirty",!0),t))},a.render=function(){return a.props.renderAsModal?a.renderModal():a.renderForm()},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.profile&&this.displayName()}},{key:"componentDidUpdate",value:function(e){!e.profile&&this.props.profile&&this.displayName()}},{key:"updateProfile",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t=this;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().post("/auth/me/profile",{firstname:this.state.firstName,lastname:this.state.lastName});case 2:this.props.fetchProfile(),this.setState({forceClose:!0,successMsg:"Profile updated with success",isDirty:!1}),window.setTimeout(function(){t.setState({successMsg:void 0})},2e3);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderFields",value:function(){return r.a.createElement("div",null,r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"firstName"},"First Name"),r.a.createElement(v.q,{name:"firstName",onChange:this.onInputChanged,onKeyPress:this.onInputKeyPress,value:this.state.firstName})),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"lastName"},"Last Name"),r.a.createElement(v.q,{name:"lastName",onChange:this.onInputChanged,onKeyPress:this.onInputKeyPress,value:this.state.lastName})))}},{key:"renderForm",value:function(){return r.a.createElement("div",null,this.state.successMsg?r.a.createElement(v.a,{type:"success"},this.state.successMsg):"",this.renderFields(),this.renderSave())}},{key:"renderModal",value:function(){return r.a.createElement(v.t,{isOpen:this.isModalOpen(),toggle:this.closeModal},r.a.createElement(v.w,{toggle:this.closeModal},"Please complete your profile"),r.a.createElement(v.u,null,this.renderFields()),r.a.createElement(v.v,null,this.renderSave()))}},{key:"renderSave",value:function(){var e=this;return this.state.isDirty&&r.a.createElement(v.c,{color:"primary",onClick:function(){return e.updateProfile()}},"Save")}}]),t}(n.Component),oa=Object(d.b)(function(e){return{profile:e.user.profile}},function(e){return Object(Ie.b)({fetchProfile:ue},e)})(ia),la=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!1},a.renderBody=function(){return a.props.profile&&r.a.createElement(v.j,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{sm:"12",md:"3",className:"profile"},r.a.createElement(he,{email:a.props.profile.email,size:"lg",className:"profile__picture"}),r.a.createElement("p",null,"We use ",r.a.createElement("a",{href:"https://gravatar.com"},"gravatar")," to display profile pictures"),r.a.createElement(sa,null)),r.a.createElement(v.h,{sm:"12",md:"6"},r.a.createElement(oa,null))))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.state.loading?r.a.createElement(et,null):this.renderBody()}}]),t}(n.Component),ca=Object(d.b)(function(e){return{profile:e.user.profile}})(la),ua=a(217),da=a.n(ua),pa=a(145),ma=a.n(pa),ha=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).id="tooltip-".concat(Math.floor(100*Math.random())),a.state={isOpen:!1},a.toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("svg",{href:"#",id:this.id,className:"form-fieldset__icon",width:"15",height:"15",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M9 16h2v-2H9v2zm1-16C4.477 0 0 4.477 0 10A10 10 0 1 0 10 0zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14a4 4 0 0 0-4 4h2a2 2 0 1 1 4 0c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5a4 4 0 0 0-4-4z",fill:"#4A4A4A",fillRule:"nonzero"})),r.a.createElement(v.F,{autohide:!1,className:this.props.className,delay:{show:100,hide:30},isOpen:this.state.isOpen,placement:"right",target:this.id,toggle:this.toggle},this.props.children))}}]),t}(n.Component),ga=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isCancelled:!1,isLoading:!1},a.disableAutoRenew=Object(w.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.license,!window.confirm("Are you sure you want to cancel auto-renew for this license?")){e.next=14;break}return e.prev=2,e.next=5,ae.getLicensing();case 5:return n=e.sent,e.next=8,n.delete("/me/keys/".concat(t.stripeSubscriptionId));case 8:a.props.onLicenseUpdated(Object(k.a)({},t,{canceled:!0})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("error canceling license");case 14:case"end":return e.stop()}},e,this,[[2,11]])})),a.revealLicense=function(){return a.props.onRevealActivate(a.props.license)},a.showLicenseUpdateModal=function(){return a.props.onShowLicenseUpdateModal(Object(k.a)({},a.props.license,{cost:a.state.cost}))},a.assignFingerprint=function(){return a.props.onRevealActivate(Object(k.a)({},a.props.license,{assigned:!1}))},a.useOnServer=Object(w.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,a.activateWithServerFingerprint();case 4:return t=e.sent,e.next=7,a.updateServerKey(t);case 7:a.props.onLicenseUpdated(Object(k.a)({},a.props.license,{fingerprint:a.props.clusterFingerprint,assigned:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("error while setting up license");case 13:a.setState({isLoading:!1}),a.props.onUseOnServer();case 15:case"end":return e.stop()}},e,this,[[1,10]])})),a.updateServerKey=function(){var e=Object(w.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().post("admin/license/update",{licenseKey:t},{timeout:1e4});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.activateWithServerFingerprint=Object(w.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getLicensing();case 2:return t=e.sent,e.next=5,t.post("/me/keys/".concat(a.props.license.stripeSubscriptionId,"/activate"),{fingerprint:a.props.clusterFingerprint});case 5:return n=e.sent,e.abrupt("return",n.data.key);case 7:case"end":return e.stop()}},e,this)})),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.calculateCost()}},{key:"componentDidUpdate",value:function(e){e.license!==this.props.license&&this.calculateCost()}},{key:"calculateCost",value:function(){var e=I.a.get(this.props,"license.limits.nodes",0)*this.getPrice("full-time-node"),t=I.a.get(this.props,"license.quantities.isGoldSupport",!1)?this.getPrice("gold-support"):0;this.setState({cost:this.getPrice("pro")+e+t})}},{key:"getPrice",value:function(e){if(this.props.products){var t=this.props.products.find(function(t){return t.product===e});return t&&t.price}}},{key:"renderActiveBadge",value:function(){var e=this.props.license.stripeSubscriptionId;return r.a.createElement(n.Fragment,null,r.a.createElement(v.b,{id:"active".concat(e),color:"primary",style:{float:"right",marginRight:"2px"}},"Active"),r.a.createElement(v.I,{placement:"right",target:"active".concat(e)},"This license matches the fingerprint of the current server"))}},{key:"renderCancelledBadge",value:function(){var e=this.props.license.stripeSubscriptionId,t=new Date(this.props.license.paidUntil).toLocaleDateString();return r.a.createElement(n.Fragment,null,r.a.createElement(v.b,{id:"cancelled".concat(e),color:"danger",style:{float:"right",marginRight:"2px"}},"Cancelled"),r.a.createElement(v.I,{placement:"right",target:"cancelled".concat(e)},"Auto-Renew is disabled for this license and it will expire on ",t))}},{key:"renderActions",value:function(){var e=this.props.license;return r.a.createElement(v.G,null,r.a.createElement(v.m,{caret:!0,size:"sm",outline:!0,disabled:this.state.isLoading},"Actions"),r.a.createElement(v.l,null,e.assigned&&r.a.createElement(v.k,{onClick:this.revealLicense},"Reveal License Key"),r.a.createElement(v.k,{onClick:this.assignFingerprint},"Assign Fingerprint"),this.props.clusterFingerprint&&r.a.createElement(v.k,{onClick:this.useOnServer},"Use on this Server"),r.a.createElement(v.k,{onClick:this.showLicenseUpdateModal},"Update License"),!e.canceled&&r.a.createElement(v.k,{onClick:this.disableAutoRenew},"Disable Auto-Renew")))}},{key:"render",value:function(){var e=this.props.license,t=e.assigned?"assigned":"not-assigned",a=this.props.clusterFingerprint&&this.props.clusterFingerprint===e.fingerprint;return r.a.createElement("tr",{disabled:e.canceled},r.a.createElement("td",null,r.a.createElement("span",{className:"table--keys__users"},e.label,"\xa0",e.canceled&&this.renderCancelledBadge(),a&&this.renderActiveBadge())),r.a.createElement("td",null,r.a.createElement("span",{className:"table--keys__users"},e.limits&&Number(e.limits.nodes)+1)),r.a.createElement("td",null,r.a.createElement("span",{className:"table--keys__users"},e.quantities.isGoldSupport?"Gold":"Standard")),r.a.createElement("td",null,r.a.createElement("span",{className:"table--keys__assigned ".concat(t)},e.assigned?"Yes":"No")),r.a.createElement("td",null,r.a.createElement("span",{className:"table--keys__users"},e.canceled?"Disabled":new Date(e.paidUntil).toLocaleDateString())),r.a.createElement("td",null,r.a.createElement("span",{className:"table--keys__cost"},this.state.cost,"$ / month")),r.a.createElement("td",null,this.renderActions()))}}]),t}(n.Component),fa={isLoading:!1,newFingerPrint:"",keyCopied:!1},Ea=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).handleKeyCopied=function(e){a.setState({keyCopied:!0}),window.setTimeout(function(){a.setState({keyCopied:!1})},1500)},a.activateLicense=Object(w.a)(y.a.mark(function e(){var t,n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.license,a.setState({isLoading:!0}),e.prev=2,e.next=5,ae.getLicensing();case 5:return n=e.sent,e.next=8,n.post("/me/keys/".concat(t.stripeSubscriptionId,"/activate"),{fingerprint:a.state.newFingerPrint});case 8:r=e.sent,s=r.data.license,a.props.onLicenseChanged(s),a.setState({license:s,isLoading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("something went wrong trying to activate license",e.t0),a.close();case 18:case"end":return e.stop()}},e,this,[[2,14]])})),a.close=function(){a.setState(Object(k.a)({},fa)),a.props.toggle()},a.handleFingerPrintChanged=function(e){return a.setState({newFingerPrint:e.target.value})},a.useCurrentServer=function(){return a.setState({newFingerPrint:a.clusterFingerprint})},a.changeFingerprint=function(){return a.setState({license:{assigned:!1}})},a.state=Object(k.a)({},fa),a.fingerprintInput=r.a.createRef(),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){e.isOpen||!this.props.isOpen||this.props.license.assigned||this.fingerprintInput.current&&this.fingerprintInput.current.focus(),this.props.license&&this.props.license!==e.license&&(this.props.license.assigned&&this.getLicenseKey(),this.setState({license:this.props.license}))}},{key:"getLicenseKey",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t,a,n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.license,e.prev=1,e.next=4,ae.getLicensing();case 4:return a=e.sent,e.next=7,a.post("/me/keys/".concat(t.stripeSubscriptionId,"/generate"));case 7:n=e.sent,r=n.data,this.setState({key:r.key}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),this.setState({error:e.t0.message});case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderAssigned",value:function(){return r.a.createElement(v.u,null,r.a.createElement("div",{className:"modal-section-title"},r.a.createElement("strong",null,"Fingerprint:"),r.a.createElement("div",null,r.a.createElement(v.c,{color:"link",size:"sm",onClick:this.changeFingerprint},r.a.createElement("small",null,"change fingerprint")))),r.a.createElement("code",null,this.state.license.fingerprint),r.a.createElement("hr",null),r.a.createElement("div",{className:"modal-section-title"},r.a.createElement("strong",null,"Key:"),r.a.createElement("div",null,r.a.createElement(Ye.CopyToClipboard,{onCopy:this.handleKeyCopied,text:this.state.key},r.a.createElement(v.c,{color:"link",size:"sm"},r.a.createElement("small",null,"copy to clipboard"),this.state.keyCopied&&r.a.createElement("span",{className:"copied"},r.a.createElement("span",{className:"check"})))))),r.a.createElement("div",{className:"modal__key"},r.a.createElement("code",null,this.state.key)))}},{key:"renderUnassigned",value:function(){return r.a.createElement(v.u,null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"fingerprint"},r.a.createElement("strong",null,"Fingerprint:")),r.a.createElement("input",{ref:this.fingerprintInput,className:"form-control",type:"text",name:"fingerprint",id:"fingerprint",value:this.state.newFingerPrint,onChange:this.handleFingerPrintChanged}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"fingerprint"},r.a.createElement("strong",null,"Current server:"),r.a.createElement("small",null,"\xa0(click to fill automatically)")),r.a.createElement("br",null),r.a.createElement(v.c,{color:"link",onClick:this.useCurrentServer},this.clusterFingerprint)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement(v.c,{color:"primary",onClick:this.activateLicense,disabled:!this.state.newFingerPrint||this.state.isLoading},"Confirm")))}},{key:"render",value:function(){var e=this.state.license;return e?r.a.createElement(v.t,{isOpen:this.props.isOpen,toggle:this.close},r.a.createElement(v.w,{toggle:this.close},"Your key"),e.assigned&&this.renderAssigned(),!e.assigned&&this.renderUnassigned()):null}},{key:"clusterFingerprint",get:function(){return I.a.get(this.props.licensing,"fingerprints.cluster_url")}}]),t}(r.a.Component),va=Object(d.b)(function(e){return{licensing:e.license.licensing}},null)(Ea),ba=function(e){return r.a.createElement("tr",null,r.a.createElement("td",{align:"center",valign:"top"},r.a.createElement("div",{style:{width:"50px"}},e.children)),r.a.createElement("td",null,r.a.createElement("div",{className:"title"},e.title," ",r.a.createElement("small",null,"\xa0\xa0(",e.price,")")),r.a.createElement("div",{className:"description"},e.description)),r.a.createElement("td",{align:"right"},r.a.createElement("div",{className:"price"},void 0!==e.total?"".concat(e.total," $ / m"):"")))},ya=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={label:"",nodes:0,isGoldSupport:!1,isPartTimeEnabled:!1,totalNodes:0,totalGoldSupport:0,totalPrice:0},a.updateParent=function(){a.props.onUpdate({label:a.state.label,limits:{nodes:a.state.nodes},quantities:{isGoldSupport:a.state.isGoldSupport},isPartTimeEnabled:a.state.isPartTimeEnabled,totalPrice:a.state.totalPrice})},a.handleLabelChanged=function(e){return a.setState({label:e.target.value},function(){return a.updateParent()})},a.handleCheckboxChanged=function(e){return a.setState(Object(we.a)({},e.target.name,e.target.checked),a.calculatePrice)},a.handleNumberInputChanged=function(e){return a.setState(Object(we.a)({},e.target.name,e.target.valueAsNumber),a.calculatePrice)},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){if(this.props.products||this.props.fetchProducts(),this.props.license){var e=this.props.license,t=e.limits,a=e.quantities,n=e.label;this.setState({label:n,nodes:t.nodes,isGoldSupport:a.isGoldSupport},this.calculatePrice)}this.calculatePrice()}},{key:"getPrice",value:function(e){if(this.props.products){var t=this.props.products.find(function(t){return t.product===e});return t&&t.price}}},{key:"calculatePrice",value:function(){var e=this.getPrice("pro"),t=this.state.nodes*this.getPrice("full-time-node"),a=this.state.isGoldSupport?this.getPrice("gold-support"):0,n=e+t+a;this.setState({totalNodes:t,totalGoldSupport:a,totalPrice:n},this.updateParent)}},{key:"render",value:function(){return this.props.products?r.a.createElement("div",null,r.a.createElement("div",{className:"license_label"},r.a.createElement("label",{className:"form__label"},"Friendly name"),r.a.createElement(v.q,{type:"text",placeholder:"My first license",style:{width:"250px"},maxLength:50,bsSize:"sm",value:this.state.label,onChange:this.handleLabelChanged})),r.a.createElement("hr",null),r.a.createElement("table",{className:"licensing_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,r.a.createElement(ba,{title:"Botpress License",description:"This is the basic license, it allows you to add unlimited collaborators, unlimited bots and run botpress on a single node.",price:this.getPrice("pro")+"$",total:this.getPrice("pro")},r.a.createElement(v.q,{type:"checkbox",disabled:!0,checked:!0})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"addons"},"Unleash Botpress's power by adding these optional add-ons")),r.a.createElement(ba,{title:"Additional Nodes",description:"Scale your Botpress installation by adding multiple nodes in the same cluster",price:this.getPrice("full-time-node")+"$ each",total:this.state.totalNodes||0},r.a.createElement(v.q,{type:"number",name:"nodes",bsSize:"sm",size:"2",maxLength:"3",min:"0",max:"100",value:this.state.nodes,onChange:this.handleNumberInputChanged})),r.a.createElement(ba,{title:"Gold Support",description:"Technical questions by email. Engineer to engineer. Priority bug fixes. Same-day reply (9AM - 4PM EST). Maximum of 8 tickets per month.",price:this.getPrice("gold-support")+"$",total:this.state.totalGoldSupport},r.a.createElement(v.q,{type:"checkbox",name:"isGoldSupport",checked:this.state.isGoldSupport,onChange:this.handleCheckboxChanged})),r.a.createElement(ba,{type:"checkbox",title:"Part-Time Nodes (available soon)",description:"Allows you to enable on-demand additional nodes, billed by the hour",price:this.getPrice("part-time-node")+"$ per hour"},r.a.createElement(v.q,{type:"checkbox",name:"isPartTimeEnabled",disabled:!0,checked:this.state.isPartTimeEnabled,onChange:this.handleCheckboxChanged})),r.a.createElement("tr",null,r.a.createElement("td",null,"\xa0"),r.a.createElement("td",{align:"right"},r.a.createElement("b",null,"Total: ")),r.a.createElement("td",null,this.state.totalPrice||0,"$ / month"))))):null}}]),t}(n.Component),wa={fetchProducts:se},Oa=Object(d.b)(function(e){return{products:e.license.products}},wa)(ya),ka={isLoading:!1,isDirty:!1,error:!1,termsRead:!1,seats:0,total:0,label:""},Ca=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state=Object(k.a)({},ka),a.toggle=function(){a.setState(Object(k.a)({},ka)),a.props.toggle()},a.toggleReadTerms=function(){a.setState({termsRead:!a.state.termsRead})},a.handleDetailsUpdated=function(e){return a.setState({order:e,isDirty:!0})},a.updateLicense=Object(w.a)(y.a.mark(function e(){var t,n,r,s,i,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),t=a.props.license,n=a.state.order,r=n.quantities,s=n.limits,i=n.label,o=n.isPartTimeEnabled,e.next=5,ae.getLicensing();case 5:e.sent.put("/me/keys/".concat(t.stripeSubscriptionId),{support:r.isGoldSupport?"gold":"standard",nodes:Number(s.nodes),label:i||"",partTime:o}).then(function(){a.props.refreshLicenses(),a.toggle()}).catch(function(e){a.setState({isLoading:!1,error:!0,errorMessage:e.message})});case 7:case"end":return e.stop()}},e,this)})),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"renderForm",value:function(){var e=this.props.license;return r.a.createElement(n.Fragment,null,e.canceled&&r.a.createElement("small",null,"* Note: Updating a canceled license will re-enable the automatic renewal"),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(Oa,{onUpdate:this.handleDetailsUpdated,license:e})),r.a.createElement("span",{className:"text-small"},r.a.createElement("strong",null,"Current total:")," ",e.cost||0,"$"),r.a.createElement(v.D,{className:"align-items-center"},r.a.createElement(v.h,{md:"4"},r.a.createElement("strong",null,"New total: ",r.a.createElement("span",{className:"text-brand"},this.state.order&&this.state.order.totalPrice||0,"$"))),r.a.createElement(v.h,{md:"4"},r.a.createElement(v.q,{type:"checkbox",name:"terms",onChange:this.toggleReadTerms}),r.a.createElement(v.s,{check:!0},"I accept the ",r.a.createElement("a",{href:"https://botpress.io/company/terms/"},"Terms of Service")," and the"," ",r.a.createElement("a",{href:"https://botpress.io/company/terms/"},"Privacy Policy"))),r.a.createElement(v.h,{md:"4",className:"text-right"},r.a.createElement(v.c,{color:"primary",onClick:this.updateLicense,disabled:!this.state.isDirty||this.state.isLoading||!this.state.termsRead},"Confirm"))))}},{key:"render",value:function(){return r.a.createElement(v.t,{isOpen:this.props.isOpen,toggle:this.toggle,size:"lg"},r.a.createElement(v.w,{toggle:this.toggle},"Update your license"),r.a.createElement(v.u,null,!this.state.error&&this.props.license&&this.renderForm(),this.state.error&&r.a.createElement(n.Fragment,null,"An error occurred: ",this.state.errorMessage)))}}]),t}(r.a.Component),Sa=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={selectedSource:null,sources:[],isLoading:!1},a.deleteSource=function(){var e=Object(w.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,e.next=4,ae.getLicensing();case 4:return n=e.sent,e.next=7,n.delete("/me/cards/".concat(t.target.id));case 7:a.refreshSources(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a.setState({error:e.t0.message,isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),a.openAddCardPopup=function(){q=a.centerPopup(ae.getStripePath(),"Add Credit Card",480,200)},a.selectSource=function(e){a.setState({selectedSource:e}),a.props.onCardChanged(e)},a.handleCardChanged=function(e){return a.selectSource(e.target.value)},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.onmessage=function(t){if("getUserInfo"===t.data.action){var a={action:"updateUserInfo",payload:e.props.userInfo};q.postMessage(a,"*")}else"saveUserCard"===t.data.action&&e.addSource(t.data.payload.id)},this.refreshSources()}},{key:"refreshSources",value:function(){var e=Object(w.a)(y.a.mark(function e(){var t,a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,ae.getLicensing();case 4:return t=e.sent,e.next=7,t.get("/me/cards");case 7:a=e.sent,n=a.data,this.setState({sources:n,isLoading:!1}),n&&n.length&&this.selectSource(n[0].id),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.setState({error:e.t0.message});case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"addSource",value:function(){var e=Object(w.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,ae.getLicensing();case 4:return a=e.sent,e.next=7,a.post("/me/cards",{sourceId:t});case 7:this.refreshSources(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({error:e.t0.message,isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"centerPopup",value:function(e,t,a,n){var r=window.outerHeight/2+window.screenY-n/2,s=window.outerWidth/2+window.screenX-a/2;return window.open(e,t,"toolbar=no, status=no, width="+a+", height="+n+", top="+r+", left="+s)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("b",null,"Credit Card"),r.a.createElement("br",null),r.a.createElement("small",null,"Please choose which credit card should be associated with this subscription"),r.a.createElement("div",{className:"sourcesList"},this.state.sources&&this.state.sources.map(function(t){var a=t.card,n=a.brand,s=a.last4;return r.a.createElement("div",{className:"sourceItem",key:t.id},r.a.createElement(v.q,{type:"radio",id:t.id,value:t.id,checked:e.state.selectedSource===t.id,onChange:e.handleCardChanged}),r.a.createElement("label",{htmlFor:t.id},n," ending with ",s),r.a.createElement("div",{className:"deleteButton"},r.a.createElement(v.c,{size:"sm",color:"danger",id:t.id,onClick:e.deleteSource,disabled:e.state.isLoading},r.a.createElement(qe.MdDelete,null),"Delete")))})),r.a.createElement(v.c,{size:"sm",color:"success",onClick:this.openAddCardPopup,disabled:this.state.isLoading},r.a.createElement(qe.MdAdd,null)," Add Card"))}}]),t}(n.Component),Aa=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).promoCodeInput=r.a.createRef(),a.state={promoCode:"",isCodeValid:void 0},a.validateCode=Object(w.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.promoCode.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,ae.getLicensing();case 5:return t=e.sent,e.next=8,t.post("/promo/check",{promoCode:a.state.promoCode});case 8:a.setState({isCodeValid:!0}),a.props.onUpdate({promoCode:a.state.promoCode,isPromoCodeValid:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),a.setState({isCodeValid:!1});case 15:case"end":return e.stop()}},e,this,[[2,12]])})),a.handlePromoCodeChanged=function(e){var t=e.target.value,n=0===t.length;a.props.onUpdate({promoCode:t,isPromoCodeValid:n}),a.setState({promoCode:t}),a.debounceHandleValidate()},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.debounceHandleValidate=I.a.debounce(function(){return e.validateCode()},500)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("b",null,"Promo Code"),void 0!==this.state.isCodeValid&&(this.state.isCodeValid?r.a.createElement(qe.MdCheck,{color:"green"}):r.a.createElement(qe.MdClose,{color:"red"})),r.a.createElement("br",null),r.a.createElement("small",null,"If you have a promo code, please enter it below:"),r.a.createElement("input",{placeholder:"bp-promo123",className:"form-control",type:"text",size:"sm",ref:this.promoCodeInput,value:this.state.promoCode,onChange:this.handlePromoCodeChanged}))}}]),t}(r.a.Component),Ra={currentStep:"input",promoCode:"",isPromoCodeValid:void 0,isLoading:!1},Pa=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state=Object(k.a)({},Ra),a.toggle=function(){a.setState(Object(k.a)({},Ra)),a.props.toggle()},a.confirmPurchase=Object(w.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.prev=1,t={source:a.state.card,promoCode:a.state.promoCode,support:a.state.order.quantities.isGoldSupport?"gold":"standard",nodes:Number(a.state.order.limits.nodes),label:a.state.order.label,partTime:a.state.order.isPartTimeEnabled},e.next=5,ae.getLicensing();case 5:return n=e.sent,e.next=8,n.post("/me/keys",t);case 8:a.setState({isLoading:!1,currentStep:"success"}),window.setTimeout(function(){a.props.refreshLicenses(),a.toggle()},1250),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("cannot buy license",e.t0),a.setState({isLoading:!1,error:e.t0.message});case 16:case"end":return e.stop()}},e,this,[[1,12]])})),a.handleOrderUpdated=function(e){return a.setState({order:e})},a.handleCardChanged=function(e){return a.setState({card:e})},a.handlePromoCodeUpdated=function(e){var t=e.promoCode,n=e.isPromoCodeValid;return a.setState({promoCode:t,isPromoCodeValid:n})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=z.auth().currentUser;this.setState({user:{name:e.displayName,email:e.email}})}},{key:"renderSuccess",value:function(){return r.a.createElement("div",null,r.a.createElement("span",null,"Thank you for your purchase!"))}},{key:"renderValidation",value:function(){var e=this;return r.a.createElement(v.h,null,r.a.createElement(Sa,{userInfo:this.state.user,onCardChanged:this.handleCardChanged}),r.a.createElement("br",null),r.a.createElement(Aa,{onUpdate:this.handlePromoCodeUpdated}),r.a.createElement("p",null,r.a.createElement("br",null),r.a.createElement("b",null,"Total:")," ",this.state.order&&this.state.order.totalPrice,"$ per month"),r.a.createElement(v.c,{size:"sm",color:"primary",style:{float:"right"},onClick:this.confirmPurchase,disabled:!this.state.card||!1===this.state.isPromoCodeValid||this.state.isLoading},"Confirm my purchase"),r.a.createElement(v.c,{size:"sm",style:{float:"left"},onClick:function(){return e.setState({currentStep:"input"})}},"< Edit my order"))}},{key:"renderForm",value:function(){var e=this;return r.a.createElement(v.h,null,r.a.createElement(Oa,{license:this.state.order,onUpdate:this.handleOrderUpdated}),r.a.createElement(v.c,{size:"sm",color:"primary",style:{float:"right"},onClick:function(){return e.setState({currentStep:"validation"})}},"Continue to checkout"))}},{key:"render",value:function(){var e;return e="input"===this.state.currentStep?this.renderForm():"validation"===this.state.currentStep?this.renderValidation():this.renderSuccess(),r.a.createElement(v.t,{isOpen:this.props.isOpen,toggle:this.toggle,size:"lg"},r.a.createElement(v.w,{toggle:this.toggle},"Buy new license"),r.a.createElement(v.u,null,e))}}]),t}(r.a.Component),Ia=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state={error:!1,selectedLicense:null,keyModalOpen:!1,updateModalOpen:!1,buyModalOpen:!1},a.toggleBuyModal=function(){return a.setState({buyModalOpen:!a.state.buyModalOpen})},a.onLicenseUpdated=function(e){a.props.licenseUpdated(e),a.setState({updateModalOpen:!1})},a.onUseOnServer=function(){a.props.fetchLicensing()},a.toggleUpdateModal=function(e){a.setState({updateModalOpen:!a.state.updateModalOpen,selectedLicense:e})},a.toggleKeyModal=function(e){a.setState({keyModalOpen:!a.state.keyModalOpen,selectedLicense:e})},a.logoutAccount=function(){a.props.logoutUser()},a.hasKeys=function(){return a.props.keys&&a.props.keys.length>0},a.renderNoKeys=function(){return r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:8,offset:2}},r.a.createElement("h1",null,r.a.createElement(da.a,null),"\xa0You have no keys"),r.a.createElement("p",null,"License keys are necessary to enable Professional Edition. See"," ",r.a.createElement("a",{href:"https://botpress.io/docs/pro/licensing"},"the docs")," to learn how buy, and activate a pro license."),r.a.createElement(v.c,{size:"sm",color:"primary",onClick:a.toggleBuyModal},r.a.createElement(ma.a,null),"\xa0Buy your first key"))))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(e){!this.props.keys&&!this.props.fetchingKeys&&this.props.fetchAllKeys(),!this.props.products&&!this.props.fetchingProducts&&this.props.fetchProducts()}},{key:"renderKeysTable",value:function(){var e=this,t=I.a.get(this.props.licensing,"fingerprints.cluster_url");return r.a.createElement(v.E,{className:"table--keys"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Label"),r.a.createElement("th",null,"Available Nodes"),r.a.createElement("th",null,"Support"),r.a.createElement("th",null,"Assigned"),r.a.createElement("th",null,"Renews on"),r.a.createElement("th",null,"Cost \xa0",r.a.createElement(ha,{className:"tooltip--light"},r.a.createElement("span",null,"This price doesn't include part-time nodes or any coupon you may have used"))),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.keys.sort(function(e,t){return e.stripeSubscriptionId<t.stripeSubscriptionId?-1:e.stripeSubscriptionId>t?1:0}).map(function(a){return r.a.createElement(ga,{key:a.stripeSubscriptionId,license:a,products:e.props.products,clusterFingerprint:t,onRevealActivate:e.toggleKeyModal,onShowLicenseUpdateModal:e.toggleUpdateModal,onUseOnServer:e.onUseOnServer})})))}},{key:"renderPage",value:function(){return r.a.createElement(n.Fragment,null,!this.state.error&&this.hasKeys()&&this.renderKeysTable(),!this.state.error&&!this.hasKeys()&&this.renderNoKeys(),r.a.createElement(va,{isOpen:this.state.keyModalOpen,toggle:this.toggleKeyModal,license:this.state.selectedLicense,onLicenseChanged:this.props.fetchAllKeys}),r.a.createElement(Ca,{isOpen:this.state.updateModalOpen,toggle:this.toggleUpdateModal,license:this.state.selectedLicense,refreshLicenses:this.props.fetchAllKeys}),r.a.createElement(Pa,{isOpen:this.state.buyModalOpen,toggle:this.toggleBuyModal,license:this.state.selectedLicense,refreshLicenses:this.props.fetchAllKeys}))}},{key:"renderSideMenu",value:function(){return r.a.createElement("div",{className:"licensing_sideMenu"},r.a.createElement(v.c,{size:"sm",color:"primary",onClick:this.toggleBuyModal},r.a.createElement(ma.a,null),"\xa0",this.hasKeys()?r.a.createElement("span",null,"Buy more keys"):r.a.createElement("span",null,"Buy your first key")),r.a.createElement(v.c,{size:"sm",color:"link",onClick:this.logoutAccount},"Logout"))}},{key:"render",value:function(){return r.a.createElement(Rt,{title:"License Keys",helpText:"Manage your license keys, edit your subscriptions and purchase new license keys",activePage:"keys",mainContent:this.props.fetchingKeys?r.a.createElement(et,null):this.renderPage(),sideMenu:this.props.fetchingKeys?r.a.createElement("span",null):this.renderSideMenu()})}}]),t}(n.Component),xa={fetchAllKeys:function(){return function(){var e=Object(w.a)(y.a.mark(function e(t){var a,n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"license/FETCH_KEYS_REQUESTED"}),e.next=3,ae.getLicensing();case 3:return a=e.sent,e.next=6,a.get("/me/keys");case 6:n=e.sent,r=n.data,t({type:"license/FETCH_KEYS_RECEIVED",keys:r.licenses});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fetchProducts:se,fetchLicensing:re,logoutUser:function(){return Q(),{type:"license/LOGOUT_USER_FROM_LICENSE_SERVER"}},licenseUpdated:function(e){return{type:"license/LICENSE_KEY_UPDATED",license:e}}},Na=Object(d.b)(function(e){return Object(k.a)({},e.license)},xa)(Ia),ja={email:"",password:"",error:null,success:null,isLoading:!1,isRegistering:!1,showResetPasswordLink:!1},Ma="auth/wrong-password",Ta=6,Da=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).state=Object(k.a)({},ja),a.setSubmitAction=function(){a.submitAction=a.state.isRegistering?a.register:a.login},a.login=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({error:null,success:null,isLoading:!0}),e.prev=1,e.next=4,Z({email:a.state.email,password:a.state.password});case 4:a.props.toggle(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({error:e.t0.message,showResetPasswordLink:e.t0.code===Ma,isLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,7]])})),a.register=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({error:null,isLoading:!0}),e.prev=1,e.next=4,J({email:a.state.email,password:a.state.password});case 4:a.props.toggle(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({error:e.t0.message,isLoading:!1});case 10:case"end":return e.stop()}},e,this,[[1,7]])})),a.sendResetPassword=Object(w.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({error:null,success:null,showResetPasswordLink:!1}),e.prev=1,e.next=4,G({email:a.state.email});case 4:a.setState({success:"An email was sent to ".concat(a.state.email," with instructions on how to reset your password.")}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({error:e.t0.message});case 10:case"end":return e.stop()}},e,this,[[1,7]])})),a.setRegisterMode=function(){a.setState({error:null,isRegistering:!0,showResetPasswordLink:!1})},a.isFormValid=function(){return a.formEl&&a.formEl.checkValidity()&&a.state.password.length>=Ta},a.handleInputChanged=function(e){return a.setState(Object(we.a)({},e.target.name,e.target.value))},a.toggle=function(){a.setState(Object(k.a)({},ja)),a.props.toggle()},a.renderForm=function(){return r.a.createElement(v.h,null,a.state.error&&r.a.createElement(v.a,{color:"danger"},a.state.error),a.state.success&&r.a.createElement(v.a,{color:"success"},a.state.success),r.a.createElement("form",{ref:function(e){a.formEl=e},onSubmit:function(e){e.preventDefault(),a.submitAction()},noValidate:!0},r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement(v.q,{value:a.state.email,type:"email",name:"email",id:"email",onChange:a.handleInputChanged})),r.a.createElement(v.p,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(v.q,{value:a.state.password,type:"password",name:"password",id:"password",onChange:a.handleInputChanged})),r.a.createElement("div",null,r.a.createElement(v.c,{type:"submit",disabled:!a.isFormValid(),size:"m",color:"primary"},a.state.isRegistering?"Register":"Login"),!a.state.isRegistering&&a.renderToggleRegister())))},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setSubmitAction()}},{key:"componentDidUpdate",value:function(){this.setSubmitAction()}},{key:"renderResetPassword",value:function(){return r.a.createElement("small",null,"Forgot your password? \xa0",r.a.createElement(v.c,{color:"link",onClick:this.sendResetPassword},"Click here and we'll send you an email right away to change it."))}},{key:"renderToggleRegister",value:function(){return r.a.createElement("div",{className:"registerBtn"},r.a.createElement(v.c,{size:"sm",color:"link",onClick:this.setRegisterMode},"Create an account"))}},{key:"render",value:function(){var e=this.renderForm(),t=this.state.isRegistering?"Create an account":"Login to your account";return r.a.createElement(v.t,{isOpen:this.props.isOpen,toggle:this.toggle,size:"md"},r.a.createElement(v.w,{toggle:this.toggle},t),r.a.createElement(v.u,null,e),r.a.createElement(v.v,null,this.state.showResetPasswordLink&&this.renderResetPassword()))}}]),t}(n.Component),Fa=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={loginModalOpen:!1},a.toggleLoginModal=function(){a.setState({loginModalOpen:!a.state.loginModalOpen})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.r,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"},sm:"12",md:{size:10,offset:1}},r.a.createElement("p",null,"Login to your botpress account to buy and manage license keys. License keys are necessary to enable Professionnal Edition features like role-based access management, cluster deployement & more. For more information head to ",r.a.createElement("a",{href:"https://botpress.io/pricing"},"our website")))),r.a.createElement(v.D,null,r.a.createElement(v.h,{style:{textAlign:"center"}},r.a.createElement(v.c,{onClick:this.toggleLoginModal,color:"primary",size:"sm"},"Login to botpress")))),r.a.createElement(Da,{isOpen:this.state.loginModalOpen,toggle:this.toggleLoginModal}))}}]),t}(n.Component),Ba=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={currentUser:null},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;e=function(e){t.setState({currentUser:e})},z.auth().onAuthStateChanged(e)}},{key:"render",value:function(){return this.state.currentUser?r.a.createElement(Na,null):r.a.createElement(Fa,null)}}]),t}(n.Component),Ua=function(e){var t=[{name:"My Profile",route:"/profile/me",icon:r.a.createElement(qe.MdPerson,null),component:ca},{name:"My Botpress Account",route:"/profile/account",icon:r.a.createElement(qe.MdSubscriptions,null),component:Ba}];return r.a.createElement(mt,Object(k.a)({title:"My Account",tabs:t},e,{showHome:!0}))},La=a(369),Ka=a(218),Ha=a.n(Ka),Va=[{label:"Public",value:"public"},{label:"Private",value:"private"},{label:"Disabled",value:"disabled"}],za=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",name:"",avatarUrl:"",coverPictureUrl:"",category:void 0,description:"",website:"",phoneNumber:"",termsConditions:"",emailAddress:"",error:void 0,categories:[],moreOpen:!1},a.prepareCategories=function(){a.props.botCategories&&a.setState({categories:a.props.botCategories.map(function(e){return{label:e,value:e}})})},a.saveChanges=Object(w.a)(y.a.mark(function e(){var t,n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({error:void 0}),t={name:a.state.name,description:a.state.description,category:a.state.category&&a.state.category.value,details:{website:a.state.website,phoneNumber:a.state.phoneNumber,termsConditions:a.state.termsConditions,emailAddress:a.state.emailAddress,avatarUrl:a.state.avatarUrl,coverPictureUrl:a.state.coverPictureUrl,privacyPolicy:a.state.privacyPolicy}},"disabled"===(n=a.state.status&&a.state.status.value)?t.disabled=!0:(t.disabled=!1,t.private="private"===n),r=Ha.a.validate(t,La.BotEditSchema),!(s=r.error)){e.next=8;break}return a.setState({error:s}),e.abrupt("return");case 8:return e.next=10,ae.getSecured().put("/admin/bots/".concat(a.state.botId),t).catch(function(e){return a.setState({error:e})});case 10:return e.next=12,a.props.fetchBots();case 12:a.setState({successMsg:"Bot configuration updated successfully"}),window.setTimeout(function(){a.setState({successMsg:void 0})},2e3);case 14:case"end":return e.stop()}},e,this)})),a.toggleMoreOpen=function(){a.setState({moreOpen:!a.state.moreOpen})},a.handleInputChanged=function(e){return a.setState(Object(we.a)({},e.target.name,e.target.value))},a.handleStatusChanged=function(e){return a.setState({status:e})},a.handleCategoryChanged=function(e){return a.setState({category:e})},a.handleImageFileChanged=function(){var e=Object(w.a)(y.a.mark(function e(t){var n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,t.target.files){e.next=3;break}return e.abrupt("return");case 3:if(t.target.files[0].type.includes("image/")){e.next=6;break}return a.setState({error:"".concat(n," requires an image file")}),e.abrupt("return");case 6:return(r=new FormData).append("file",t.target.files[0]),a.state.error&&a.setState({error:null}),e.next=11,ae.getSecured().post("/bots/".concat(a.state.botId,"/media"),r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.setState(Object(we.a)({},n,e.data.url),a.saveChanges)}).catch(function(e){a.setState({error:e})});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.botCategoriesFetched||this.props.fetchBotCategories(),this.props.fetchBots(),this.prepareCategories()}},{key:"componentDidUpdate",value:function(e){e.bots!==this.props.bots&&this.loadBot(),e.botCategories!==this.props.botCategories&&this.prepareCategories()}},{key:"loadBot",value:function(){var e=this.props.match.params.botId,t=this.props.bots.find(function(t){return t.id===e}),a=t.disabled?"disabled":t.private?"private":"public",n=I.a.get(t,"details",{});this.setState({botId:e,name:t.name,description:t.description,website:n.website,phoneNumber:n.phoneNumber,termsConditions:n.termsConditions,privacyPolicy:n.privacyPolicy,emailAddress:n.emailAddress,status:Va.find(function(e){return e.value===a}),category:this.state.categories.find(function(e){return e.value===t.category}),avatarUrl:n.avatarUrl||"",coverPictureUrl:n.coverPictureUrl||""})}},{key:"renderHelp",value:function(e,t){return r.a.createElement("span",null,r.a.createElement(qe.MdInfoOutline,{id:"help".concat(t),className:"section-title-help"}),r.a.createElement(v.I,{placement:"right",target:"help".concat(t)},e))}},{key:"renderDetails",value:function(){return r.a.createElement("div",null,this.state.error&&r.a.createElement(v.a,{color:"danger"},this.state.error.message),this.state.successMsg&&r.a.createElement(v.a,{type:"success"},this.state.successMsg),r.a.createElement(v.n,null,r.a.createElement(v.D,{form:!0},r.a.createElement(v.h,{md:5},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"name"},r.a.createElement("strong",null,"Name")),r.a.createElement(v.q,{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChanged}))),r.a.createElement(v.h,{md:4},!!this.state.categories.length&&r.a.createElement(v.p,null,r.a.createElement(v.s,null,r.a.createElement("strong",null,"Category")),r.a.createElement(ft.a,{options:this.state.categories,value:this.state.category,onChange:this.handleCategoryChanged}))),r.a.createElement(v.h,{md:3},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"status"},r.a.createElement("strong",null,"Status"),this.renderHelp("Public bots can be accessed by anyone, while private are only accessible by authenticated users. \n                    Please note that private bots cannot be embedded on a website. \n                    This should only be used for testing purposes while developing or if you access it directly using shortlinks")),r.a.createElement(ft.a,{options:Va,value:this.state.status,onChange:this.handleStatusChanged,isSearchable:!1})))),r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"description"},r.a.createElement("strong",null,"Description")),r.a.createElement(v.q,{type:"textarea",name:"description",value:this.state.description,onChange:this.handleInputChanged}))),this.renderCollapsible())}},{key:"renderMoreDetails",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.D,{form:!0},r.a.createElement(v.h,{md:4},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"website"},r.a.createElement("strong",null,"Website")),r.a.createElement(v.q,{type:"text",name:"website",value:this.state.website,onChange:this.handleInputChanged}))),r.a.createElement(v.h,{md:4},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"phoneNumber"},r.a.createElement("strong",null,"Phone Number")),r.a.createElement(v.q,{type:"text",name:"phoneNumber",value:this.state.phoneNumber,onChange:this.handleInputChanged}))),r.a.createElement(v.h,{md:4},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"emailAddress"},r.a.createElement("strong",null,"Contact E-mail")),r.a.createElement(v.q,{type:"text",name:"emailAddress",value:this.state.emailAddress,onChange:this.handleInputChanged})))),r.a.createElement(v.D,{form:!0},r.a.createElement(v.h,{md:6},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"termsConditions"},r.a.createElement("strong",null,"Link to Terms & Conditions")),r.a.createElement(v.q,{type:"text",name:"termsConditions",value:this.state.termsConditions,onChange:this.handleInputChanged}))),r.a.createElement(v.h,{md:6},r.a.createElement(v.p,null,r.a.createElement(v.s,{for:"termsConditions"},r.a.createElement("strong",null,"Link to Privacy Policy")),r.a.createElement(v.q,{type:"text",name:"privacyPolicy",value:this.state.privacyPolicy,onChange:this.handleInputChanged})))),r.a.createElement("small",null,"These informations are displayed on the Bot Information page,"," ",r.a.createElement("a",{href:"https://botpress.io/docs/tutorials/webchat-embedding",target:"_blank"},"check the documentation for more details")))}},{key:"renderPictures",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.D,null,r.a.createElement(v.h,{md:7},r.a.createElement(v.s,null,r.a.createElement("strong",null,"Bot Avatar")),r.a.createElement(v.q,{type:"file",accept:"image/*",name:"avatarUrl",onChange:this.handleImageFileChanged})),r.a.createElement(v.h,{md:4},this.state.avatarUrl&&r.a.createElement("img",{height:75,src:this.state.avatarUrl}))),r.a.createElement(v.D,null,r.a.createElement(v.h,{md:4},r.a.createElement(v.s,null,r.a.createElement("strong",null,"Cover Picture")),r.a.createElement(v.q,{type:"file",accept:"image/*",name:"coverPictureUrl",onChange:this.handleImageFileChanged})),r.a.createElement(v.h,{md:8},this.state.coverPictureUrl&&r.a.createElement("img",{width:"100%",src:this.state.coverPictureUrl}))))}},{key:"renderCollapsible",value:function(){var e=this;return r.a.createElement("div",{className:"bp_users-container"},r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.setState({moreCollapsed:!e.state.moreCollapsed})},className:"bp_users-role_header"},r.a.createElement("div",{className:"role float-left"},r.a.createElement("span",{className:"title"},"More details")),this.state.moreCollapsed?r.a.createElement(qe.MdKeyboardArrowUp,null):r.a.createElement(qe.MdKeyboardArrowDown,null))),r.a.createElement(v.i,{isOpen:this.state.moreCollapsed},r.a.createElement("div",{style:{padding:15}},this.renderMoreDetails())),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.setState({avatarCollapsed:!e.state.avatarCollapsed})},className:"bp_users-role_header"},r.a.createElement("div",{className:"role float-left"},r.a.createElement("span",{className:"title"},"Pictures")),this.state.avatarCollapsed?r.a.createElement(qe.MdKeyboardArrowUp,null):r.a.createElement(qe.MdKeyboardArrowDown,null))),r.a.createElement(v.i,{isOpen:this.state.avatarCollapsed},r.a.createElement("div",{style:{padding:15}},this.renderPictures())))}},{key:"render",value:function(){return r.a.createElement(Rt,{title:this.state.name,helpText:"This page shows the details you can configure for a desired bot.",activePage:"bots",currentTeam:this.props.team,mainContent:this.renderDetails(),sideMenu:r.a.createElement(v.c,{color:"primary",onClick:this.saveChanges},"Save Details")})}}]),t}(n.Component),qa={fetchBots:Te,fetchBotCategories:Me},Ya=Object(d.b)(function(e){return{bots:e.bots.bots,botCategories:e.bots.botCategories,botCategoriesFetched:e.bots.botCategoriesFetched}},qa)(za),Za=function(e){var t=[{name:"Settings & Details",route:"/bot/:botId/details",icon:r.a.createElement(qe.MdAndroid,null),component:Ya,res:"admin.bots.*",op:"write"}];return r.a.createElement(mt,Object(k.a)({title:"Bot Configuration",tabs:t},e,{showHome:!0}))},Ja=a(370),Ga=a.n(Ja),Qa=a(52),_a=(a(3106),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={nodes:void 0,checked:[],expanded:[]},a.loadConfiguration=Object(w.a)(y.a.mark(function e(){var t,n,r,s,i,o,l,c,u;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.getSecured().get("/admin/server/debug");case 2:for(t=e.sent,n=t.data,r={label:"bp",children:[]},s=!0,i=!1,o=void 0,e.prev=8,l=Object.keys(n).sort()[Symbol.iterator]();!(s=(c=l.next()).done);s=!0)u=c.value,a.buildNodeRecursive(r,u.split(":"),0);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),i=!0,o=e.t0;case 16:e.prev=16,e.prev=17,s||null==l.return||l.return();case 19:if(e.prev=19,!i){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:a.setState({nodes:r.children,checked:Object.keys(n).filter(function(e){return n[e]})});case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])})),a.saveConfiguration=Object(w.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.checked&&a.state.checked.join(","),e.next=3,ae.getSecured().post("/admin/server/debug",{debugScope:t});case 3:a.setState({successMsg:"Debug scope updated successfully"}),window.setTimeout(function(){a.setState({successMsg:void 0})},2e3);case 5:case"end":return e.stop()}},e,this)})),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadConfiguration()}},{key:"buildNodeRecursive",value:function(e,t,a){if(a<t.length){var n=t[a],r=e.children.find(function(e){return e.label===n});r||(r={label:n,value:t.slice(0,a+1).join(":"),children:[]},e.children.push(r)),this.buildNodeRecursive(r,t,a+1)}}},{key:"renderTree",value:function(){var e=this;return this.state.nodes?r.a.createElement(Ga.a,{nodes:this.state.nodes,checked:this.state.checked,expanded:this.state.expanded,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:t})},showExpandAll:!0,icons:{check:r.a.createElement(Qa.FaCheckSquare,null),uncheck:r.a.createElement(Qa.FaSquare,null),halfCheck:r.a.createElement(Qa.FaCheckSquare,{fillOpacity:"0.5"}),expandClose:r.a.createElement(Qa.FaChevronRight,null),expandOpen:r.a.createElement(Qa.FaChevronDown,null),expandAll:r.a.createElement(Qa.FaPlusSquare,null),collapseAll:r.a.createElement(Qa.FaMinusSquare,null),parentClose:r.a.createElement(Qa.FaFolder,{stroke:"blue",fill:"none"}),parentOpen:r.a.createElement(Qa.FaFolderOpen,{stroke:"blue",fill:"none"}),leaf:r.a.createElement(Qa.FaFile,{stroke:"blue",fill:"none"})}}):null}},{key:"render",value:function(){return r.a.createElement(v.j,{style:{marginTop:50,border:"1px solid #dfdfdf",padding:20}},this.state.successMsg&&r.a.createElement(v.a,{type:"success"},this.state.successMsg),r.a.createElement("h3",null,"Debugging"," ",r.a.createElement(v.c,{size:"sm",onClick:this.loadConfiguration},r.a.createElement(qe.MdRefresh,null))),r.a.createElement("div",{style:{padding:20}},this.renderTree()),r.a.createElement(v.c,{color:"primary",onClick:this.saveConfiguration},"Save ",r.a.createElement(qe.MdSave,null)))}}]),t}(r.a.Component)),Wa=function(){var e=new V;return r.a.createElement(d.a,{store:ze},r.a.createElement(p.a,{history:D},r.a.createElement(l.a,null,r.a.createElement(c.a,{path:"/login",render:function(t){return r.a.createElement(Ce,Object.assign({auth:e},t))}}),r.a.createElement(c.a,{path:"/register",render:function(t){return r.a.createElement(Se,Object.assign({auth:e},t))}}),r.a.createElement(c.a,{path:"/setToken",render:function(){var t;return e.setSession({expiresIn:7200,idToken:(t="userToken",("; "+document.cookie).split("; ".concat(t,"=")).pop().split(";").shift())}),r.a.createElement(u.a,{to:"/"})}}),r.a.createElement(c.a,{path:"/changePassword",render:function(t){return r.a.createElement(Ae,Object.assign({auth:e},t))}}),r.a.createElement(Pe,{path:"/",auth:e,component:ye},r.a.createElement(l.a,null,r.a.createElement(c.a,{path:"/profile",component:Ua}),r.a.createElement(c.a,{path:"/workspace",component:na}),r.a.createElement(c.a,{path:"/server",component:Mt}),r.a.createElement(c.a,{path:"/bot",component:Za}),r.a.createElement(c.a,{path:"/debug",component:_a}),r.a.createElement(u.a,{from:"/",to:"/workspace/bots"}))))))}();i.a.render(r.a.createElement("div",null,r.a.createElement(o.ToastContainer,null),Wa),document.getElementById("root"))},352:function(e,t){e.exports="data:image/png;base64,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"},354:function(e,t,a){e.exports=a.p+"static/media/loading-circle.eb332664.svg"},355:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resourceMatches=function(e,t){var a=/[\/\.]/;(e=e||"").indexOf("*")<0&&(e+=".*");for(var n=e.split(a),r=t.split(a),s=!0,i=0;s&&i<n.length;i++)"*"!==n[i]&&(s=i<r.length&&n[i].toLowerCase()===r[i].toLowerCase());return s};var n={read:"r",write:"w"},r=["r","w"];t.checkRule=function(e,a,s){if(!e)return!1;if(a=a.toLowerCase(),a=n[a]||a,!r.includes(a))throw new Error("Invalid rule operation: ".concat(a));var i=!1,o=!0,l=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,m=p.op;if(!m||m.length<2||m.length>4)throw new Error("Invalid rule operation: ".concat(m));t.resourceMatches(p.res,s)&&(4===m.length?i=m[1]===a?"+"===m[0]:m[3]===a&&"+"===m[2]:3===m.length?i="+"===m[0]:2===m.length&&m[1]===a&&(i="+"===m[0]))}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}return i},t.checkMultipleRoles=function(e,a,n){if(!e)return!1;for(var r in e)if(t.checkRule(e[r],a,n))return!0;return!1}},369:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(328));t.BOTID_REGEX=/^[A-Z0-9]+[A-Z0-9_-]{2,}[A-Z0-9]+$/i,t.isValidBotId=function(e){return t.BOTID_REGEX.test(e)},t.BotCreationSchema=r.default.object().keys({id:r.default.string().regex(t.BOTID_REGEX).required(),name:r.default.string().min(3).max(50).required(),category:r.default.string().allow(null),description:r.default.string().min(3).max(50)}),t.BotEditSchema=r.default.object().keys({name:r.default.string().min(3).max(50).required(),category:r.default.string(),description:r.default.string().min(3).max(50).required(),disabled:r.default.bool(),private:r.default.bool(),details:{website:r.default.string().uri().optional().allow(""),termsConditions:r.default.string().uri().optional().allow(""),privacyPolicy:r.default.string().uri().optional().allow(""),phoneNumber:r.default.string().max(20).optional().allow(""),emailAddress:r.default.string().email().optional().allow(""),avatarUrl:r.default.string().optional().allow(""),coverPictureUrl:r.default.string().optional().allow("")}})},392:function(e,t,a){e.exports=a(3108)},405:function(e,t,a){},492:function(e,t){},494:function(e,t){},526:function(e,t){},527:function(e,t){},93:function(e,t){e.exports="data:image/png;base64,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"}},[[392,2,1]]]);